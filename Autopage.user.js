// ==UserScript==
// @name         Ëá™Âä®Êó†ÁºùÁøªÈ°µ
// @version      1.8.1
// @author       X.I.U
// @description  Êó†ÁºùÊãºÊé•‰∏ã‰∏ÄÈ°µÂÜÖÂÆπÔºåÁõÆÂâçÊîØÊåÅÔºö[ÊâÄÊúâ‰ΩøÁî®„ÄåDiscuz!„ÄÅFlarum„ÄÅDUX(WordPress)„ÄçÁöÑÁΩëÁ´ô]„ÄÅÁôæÂ∫¶„ÄÅË∞∑Ê≠å„ÄÅÂøÖÂ∫î„ÄÅË¥¥Âêß„ÄÅË±ÜÁì£„ÄÅÂæÆÂçö„ÄÅNGAÁé©ÂÆ∂Á§æÂå∫„ÄÅV2EX„ÄÅË∂ÖËÉΩÁΩë„ÄÅIT‰πãÂÆ∂„ÄÅÂçÉÂõæÁΩë„ÄÅPixabay„ÄÅ3DM„ÄÅÊ∏∏‰æ†ÁΩë„ÄÅÊ∏∏Ê∞ëÊòüÁ©∫„ÄÅSteam ÂàõÊÑèÂ∑•Âùä„ÄÅÂ∞èÈú∏ÁéãÂÖ∂‰πêÊó†Á©∑„ÄÅÁâáÂ∫ì„ÄÅÈü≥ËåÉ‰∏ù„ÄÅBT‰πãÂÆ∂„ÄÅÁà±ÊÅãÂä®Êº´„ÄÅNyaa„ÄÅSrkBT„ÄÅRARBG„ÄÅ423Down„ÄÅ‰∏çÊ≠ªÈ∏ü„ÄÅÂ∞è‰ºóËΩØ‰ª∂„ÄÅÊûÅÁÆÄÊèí‰ª∂„ÄÅ‰πêËΩØÂçöÂÆ¢„ÄÅ‰∏çÂøòÂàùÂøÉ„ÄÅÊûúÊ†∏Ââ•Â£≥„ÄÅÂÖ≠Èü≥ËΩØ‰ª∂„ÄÅÂæÆÂΩì‰∏ãËΩΩ„ÄÅth-sjyÊ±âÂåñ„ÄÅÂºÇÊ¨°ÂÖÉËΩØ‰ª∂„ÄÅËÄÅÊÆÅÊÆÅÊºÇÈÅ•„ÄÅÂºÇÊòüËΩØ‰ª∂Á©∫Èó¥„ÄÅÂä®Êº´ÁãÇ„ÄÅÊº´ÁîªDB„ÄÅHiComic(Âó®Êº´Áîª)„ÄÅÂè§È£éÊº´ÁîªÁΩë„ÄÅÁ†Ç‰πãËàπÂä®Êº´ÂÆ∂„ÄÅPubMed„ÄÅAfreecaTV„ÄÅGreasyFork„ÄÅCS.RIN.RU„ÄÅCrackhub213„ÄÅFitGirl Repacks...
// @match        *://*/*
// @connect      www.gamersky.com
// @icon         https://i.loli.net/2021/03/07/rdijeYm83pznxWq.png
// @grant        GM_xmlhttpRequest
// @grant        GM_registerMenuCommand
// @grant        GM_openInTab
// @grant        GM_getValue
// @grant        GM_setValue
// @grant        GM_notification
// @noframes
// @license      GPL-3.0 License
// @run-at       document-end
// @namespace    https://github.com/XIU2/UserScript
// @supportURL   https://github.com/XIU2/UserScript
// @homepageURL  https://github.com/XIU2/UserScript
// ==/UserScript==

(function() {
    'use strict';
    var webType = 0, curSite = {SiteTypeID: 0}, DBSite, SiteType, pausePage = true;
    if (GM_getValue('menu_disable') == null){GM_setValue('menu_disable', [])}; if (GM_getValue('menu_discuz_thread_page') == null){GM_setValue('menu_discuz_thread_page', true)}; if (GM_getValue('menu_pause_page') == null){GM_setValue('menu_pause_page', true)};
    // Ê≥®ÂÜåËÑöÊú¨ËèúÂçï
    if (menu_disable('check')) { // ÂΩìÂâçÁΩëÁ´ôÊòØÂê¶Â∑≤Â≠òÂú®Á¶ÅÁî®ÂàóË°®‰∏≠
        GM_registerMenuCommand('‚ùå Â∑≤Á¶ÅÁî® (ÁÇπÂáªÂØπÂΩìÂâçÁΩëÁ´ôÂêØÁî®)', function(){menu_disable('del')});
        return
    } else {
        webType = doesItSupport(); // Âà§Êñ≠ÁΩëÁ´ôÁ±ªÂûãÔºàÂç≥ÊòØÂê¶ÊîØÊåÅÔºâÔºåÈ°∫‰æøÁõ¥Êé•ËµãÂÄº
        if (webType === 0) {
            GM_registerMenuCommand('‚ùå ÂΩìÂâçÁΩëÁ´ôÊöÇ‰∏çÊîØÊåÅ [ÁÇπÂáªÁî≥ËØ∑ÊîØÊåÅ]', function () {window.GM_openInTab('https://github.com/XIU2/UserScript#xiu2userscript', {active: true,insert: true,setParent: true});window.GM_openInTab('https://greasyfork.org/zh-CN/scripts/419215/feedback', {active: true,insert: true,setParent: true});});
            console.info('[Ëá™Âä®Êó†ÁºùÁøªÈ°µ] - ‰∏çÊîØÊåÅÂΩìÂâçÁΩëÁ´ôÔºåÊ¨¢ËøéÁî≥ËØ∑ÊîØÊåÅÔºöhttps://github.com/XIU2/UserScript / https://greasyfork.org/zh-CN/scripts/419215/feedback');
            return
        }
        GM_registerMenuCommand('‚úÖ Â∑≤ÂêØÁî® (ÁÇπÂáªÂØπÂΩìÂâçÁΩëÁ´ôÁ¶ÅÁî®)', function(){menu_disable('add')});
        if (webType === 2 || location.host === 'cs.rin.ru') {
            GM_registerMenuCommand(`${GM_getValue('menu_discuz_thread_page')?'‚úÖ':'‚ùå'} Â∏ñÂ≠êÂÜÖËá™Âä®ÁøªÈ°µ (‰ªÖËÆ∫Âùõ)`, function(){menu_switch(GM_getValue('menu_discuz_thread_page'), 'menu_discuz_thread_page', 'Discuz! ËÆ∫ÂùõÂ∏ñÂ≠êÂÜÖÁøªÈ°µ')});
        }
        GM_registerMenuCommand(`${GM_getValue('menu_pause_page')?'‚úÖ':'‚ùå'} Â∑¶ÈîÆÂèåÂáªÁΩëÈ°µÁ©∫ÁôΩÂ§ÑÊöÇÂÅúÁøªÈ°µ`, function(){menu_switch(GM_getValue('menu_pause_page'), 'menu_pause_page', 'Â∑¶ÈîÆÂèåÂáªÁΩëÈ°µÁ©∫ÁôΩÂ§ÑÊöÇÂÅúÁøªÈ°µ')});
    }
    GM_registerMenuCommand('üí¨ ÂèçÈ¶à & Ê¨¢ËøéÁî≥ËØ∑ÊîØÊåÅ', function () {window.GM_openInTab('https://github.com/XIU2/UserScript#xiu2userscript', {active: true,insert: true,setParent: true});window.GM_openInTab('https://greasyfork.org/zh-CN/scripts/419215/feedback', {active: true,insert: true,setParent: true});});

    function setDBSite() {
    /*
    Ëá™Âä®ÁøªÈ°µËßÑÂàô
    typeÔºö
      1 = Áî±ËÑöÊú¨ÂÆûÁé∞Ëá™Âä®Êó†ÁºùÁøªÈ°µ
      2 = ÁΩëÁ´ôËá™Â∏¶‰∫ÜËá™Âä®Êó†ÁºùÁøªÈ°µÂäüËÉΩÔºåÂè™ÈúÄË¶ÅÁÇπÂáª‰∏ã‰∏ÄÈ°µÊåâÈíÆÂç≥ÂèØ
          nextText: ÊåâÈíÆÊñáÊú¨ÔºåÂΩìÊåâÈíÆÊñáÊú¨ = ËØ•ÊñáÊú¨Êó∂ÔºåÊâç‰ºöÁÇπÂáªÊåâÈíÆÂä†ËΩΩ‰∏ã‰∏ÄÈ°µÔºàÈÅøÂÖç‰∏ÄÁû¨Èó¥Âä†ËΩΩÂ§™Â§öÊ¨°‰∏ã‰∏ÄÈ°µÔºâ
          nextTextOf: ÊåâÈíÆÊñáÊú¨ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂΩìÊåâÈíÆÊñáÊú¨ÂåÖÂê´ËØ•ÊñáÊú¨Êó∂ÔºåÊâç‰ºöÁÇπÂáªÊåâÈíÆÂä†ËΩΩ‰∏ã‰∏ÄÈ°µÔºàÈÅøÂÖç‰∏ÄÁû¨Èó¥Âä†ËΩΩÂ§™Â§öÊ¨°‰∏ã‰∏ÄÈ°µÔºâ
          nextHTML: ÊåâÈíÆÂÜÖÂÖÉÁ¥†ÔºåÂΩìÊåâÈíÆÂÜÖÂÖÉÁ¥† = ËØ•ÂÖÉÁ¥†ÂÜÖÂÆπÊó∂ÔºåÊâç‰ºöÁÇπÂáªÊåâÈíÆÂä†ËΩΩ‰∏ã‰∏ÄÈ°µÔºàÈÅøÂÖç‰∏ÄÁû¨Èó¥Âä†ËΩΩÂ§™Â§öÊ¨°‰∏ã‰∏ÄÈ°µÔºâ
          intervals: ÁÇπÂáªÈó¥ÈöîÊó∂Èó¥ÔºåÂØπ‰∫éÊ≤°ÊúâÊåâÈíÆÊñáÂ≠óÂèòÂåñÁöÑÊåâÈíÆÔºåÂèØ‰ª•ÊâãÂä®ÊåáÂÆöÈó¥ÈöîÊó∂Èó¥ÔºåÂçï‰ΩçÔºöms
      3 = ‰æùÈù†ÂÖÉÁ¥†Ë∑ùÁ¶ªÂèØËßÜÂå∫ÂüüÂ∫ïÈÉ®ÁöÑË∑ùÁ¶ªÊù•Ëß¶ÂèëÁøªÈ°µ
      4 = ÈÉ®ÂàÜÁÆÄÂçïÁöÑÂä®ÊÄÅÂä†ËΩΩÁ±ªÁΩëÁ´ôÔºàÊöÇÊó∂Ôºâ
    insertPositionÔºö
      1 = ÊèíÂÖ•ËØ•ÂÖÉÁ¥†Êú¨Ë∫´ÁöÑÂâçÈù¢Ôºõ
      2 = ÊèíÂÖ•ËØ•ÂÖÉÁ¥†ÂΩì‰∏≠ÔºåÁ¨¨‰∏Ä‰∏™Â≠êÂÖÉÁ¥†ÂâçÈù¢Ôºõ
      3 = ÊèíÂÖ•ËØ•ÂÖÉÁ¥†ÂΩì‰∏≠ÔºåÊúÄÂêé‰∏Ä‰∏™Â≠êÂÖÉÁ¥†ÂêéÈù¢Ôºõ
      4 = ÊèíÂÖ•ËØ•ÂÖÉÁ¥†Êú¨Ë∫´ÁöÑÂêéÈù¢Ôºõ
    mimeType: ÁΩëÁ´ôÁºñÁ†Å
    scrollDeltaÔºöÊï∞ÂÄºË∂äÂ§ßÔºåÊªöÂä®Êù°Ëß¶ÂèëÁÇπË∂äÈù†‰∏äÔºàË∂äÊó©ÂºÄÂßãÁøªÈ°µÔºâÔºå‰∏ÄËà¨ÊòØËÆøÈóÆÁΩëÈ°µÈÄüÂ∫¶Ë∂äÊÖ¢ÔºåËØ•ÂÄºÂ∞±ÈúÄË¶ÅË∂äÂ§ßÔºàÂ¶ÇÊûú Type = 3ÔºåÂàôÁõ∏ÂèçÔºâ
    functionÔºö
      before = ÊèíÂÖ•ÂâçÊâßË°åÂáΩÊï∞Ôºõ
      after = ÊèíÂÖ•ÂêéÊâßË°åÂáΩÊï∞Ôºõ
      parameter = ÂèÇÊï∞
    */
        DBSite = {
            discuz_forum: { // ÂêÑÁâàÂùóÂ∏ñÂ≠êÂàóË°®ÔºàËá™Â∏¶Êó†ÁºùÂä†ËΩΩ‰∏ã‰∏ÄÈ°µÊåâÈíÆÁöÑÔºâ
                SiteTypeID: 0,
                pager: {
                    type: 2,
                    nextLink: '#autopbn',
                    nextText: '‰∏ã‰∏ÄÈ°µ ¬ª',
                    scrollDelta: 1500
                }
            },
            discuz_thread: { // Â∏ñÂ≠êÂÜÖ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//a[@class="nxt"][@href][not(contains(@href, "javascript"))] | //a[@class="next"][@href][not(contains(@href, "javascript"))]',
                    pageElement: 'css;#postlist > div[id^="post_"]',
                    insertPosition: ['css;#postlist', 3],
                    replaceE: 'css;.pg, .pages',
                    scrollDelta: 1000
                }
            },
            discuz_search: { // ÊêúÁ¥¢È°µ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//a[@class="nxt"][@href][not(contains(@href, "javascript"))] | //a[@class="next"][@href][not(contains(@href, "javascript"))]',
                    pageElement: 'css;#threadlist > ul',
                    insertPosition: ['css;#threadlist', 3],
                    replaceE: 'css;.pg, .pages',
                    scrollDelta: 1000
                }
            },
            discuz_guide: { // ÂØºËØª‰πãÁ±ªÁöÑ Âèä ÂêÑÁâàÂùóÂ∏ñÂ≠êÂàóË°®Ôºà‰∏çÂ∏¶Êó†ÁºùÂä†ËΩΩ‰∏ã‰∏ÄÈ°µÊåâÈíÆÁöÑÔºâ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//a[@class="nxt"][@href][not(contains(@href, "javascript"))] | //a[@class="next"][@href][not(contains(@href, "javascript"))]',
                    pageElement: 'css;#threadlist table > tbody[id^="normalthread_"]',
                    insertPosition: ['id("threadlist")//table/tbody[starts-with(@id, "normalthread_")]/parent::table', 3],
                    replaceE: 'css;.pg, .pages',
                    scrollDelta: 1000
                }
            },
            discuz_youspace: { // Âà´‰∫∫ÁöÑÂõûÂ§çÈ°µ„ÄÅ‰∏ªÈ¢òÈ°µ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//a[@class="nxt"][@href][not(contains(@href, "javascript"))] | //a[@class="next"][@href][not(contains(@href, "javascript"))]',
                    pageElement: 'css;tbody > tr:not(.th)',
                    insertPosition: ['css;tbody', 3],
                    replaceE: 'css;.pg, .pages',
                    scrollDelta: 1000
                }
            },
            discuz_collection: { // Ê∑òÂ∏ñÈ°µ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//a[@class="nxt"][@href][not(contains(@href, "javascript"))] | //a[@class="next"][@href][not(contains(@href, "javascript"))]',
                    pageElement: 'css;#ct .bm_c table > tbody',
                    insertPosition: ['css;#ct .bm_c table', 3],
                    replaceE: 'css;.pg, .pages',
                    scrollDelta: 1000
                }
            },
            flarum: {
                SiteTypeID: 0,
                pager: {
                    type: 2,
                    nextLink: '.DiscussionList-loadMore > button[title]',
                    scrollDelta: 1000
                }
            },
            dux: { // ‰∏ÄÁßç WordPress ‰∏ªÈ¢ò
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//li[@class="next-page"]/a[@href]',
                    pageElement: 'css;.content > article',
                    insertPosition: ['css;.content > .pagination', 1],
                    replaceE: 'css;.content > .pagination',
                    scrollDelta: 1500
                },
                function: {
                    before: dux_functionBefore
                }
            },
            baidu: { // ÁôæÂ∫¶ÊêúÁ¥†
                SiteTypeID: 0,
                host: 'www.baidu.com',
                pager: {
                    type: 1,
                    nextLink: 'id("page")//a[contains(text(),"‰∏ã‰∏ÄÈ°µ")][@href]',
                    pageElement: 'css;#content_left > *',
                    insertPosition: ['css;#content_left', 3],
                    replaceE: 'css;#page',
                    scrollDelta: 1200
                }
            },
            google: { // Ë∞∑Ê≠åÊêúÁ¥¢
                SiteTypeID: 0,
                host: 'www.google.com',
                functionStart: function() {if (location.pathname === '/search') curSite = DBSite.google;},
                pager: {
                    type: 1,
                    nextLink: 'id("pnnext")[@href]',
                    pageElement: 'css;#res > *',
                    insertPosition: ['css;#res', 3],
                    replaceE: 'id("navcnt") | id("rcnt")//div[@role="navigation"]',
                    scrollDelta: 2000
                }
            },
            bing: { // ÂøÖÂ∫îÊêúÁ¥¢
                SiteTypeID: 0,
                host: ['www.bing.com','cn.bing.com'],
                functionStart: function() {if (location.pathname === '/search') {curSite = DBSite.bing; document.lastElementChild.appendChild(document.createElement('style')).textContent = '.b_imagePair.square_mp > .inner {display: none;}';}},
                pager: {
                    type: 1,
                    nextLink: '//a[contains(@class,"sb_pagN")][@href]',
                    pageElement: 'css;#b_results > li:not(.b_msg):not(.b_pag):not(#mfa_root)',
                    insertPosition: ['css;#b_results > .b_pag', 1],
                    replaceE: 'css;#b_results > .b_pag',
                    scrollDelta: 1500
                }
            },
            baidu_tieba: { // ÁôæÂ∫¶Ë¥¥Âêß - Â∏ñÂ≠êÂàóË°®
                SiteTypeID: 0,
                host: 'tieba.baidu.com',
                functionStart: function() {if (location.pathname === '/f') { // Â∏ñÂ≠êÂàóË°®
                    baidu_tieba_1(); // Âè≥‰æßÊÇ¨ÊµÆÂèëÂ∏ñÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂ÔºàËß£ÂÜ≥Ëá™Âä®ÁøªÈ°µÂØºËá¥Êó†Ê≥ïÂèëÂ∏ñÁöÑÈóÆÈ¢òÔºâ
                    curSite = DBSite.baidu_tieba; document.lastElementChild.appendChild(document.createElement('style')).textContent = 'img.j_retract {margin-top: 0 !important;margin-bottom: 0 !important;}'; // ‰øÆÂ§çÂ∏ñÂ≠êÂàóË°®‰∏≠È¢ÑËßàÂõæÁâáÔºåÂú®ÂàáÊç¢‰∏ã‰∏Ä‰∏™/‰∏ä‰∏Ä‰∏™ÂõæÁâáÊó∂ÔºåÂ§öÂá∫Êù•ÁöÑÂõæÁâá‰∏ä‰∏ãËæπË∑ù
                } else if (location.pathname === '/f/search/res') { // ÂêßÂÜÖÊêúÁ¥¢/ÂÖ®ÂêßÊêúÁ¥¢
                    curSite = DBSite.baidu_tieba_search;
                }},
                pager: {
                    type: 1,
                    nextLink: '//a[@class="next pagination-item "][@href]',
                    pageElement: 'css;#thread_list > li',
                    insertPosition: ['css;#thread_list', 3],
                    replaceE: 'css;#frs_list_pager',
                    scrollDelta: 1500
                },
                function: {
                    before: baidu_tieba_functionBefore
                }
            },
            baidu_tieba_post: { // ÁôæÂ∫¶Ë¥¥Âêß - Â∏ñÂ≠êÂÜÖ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//li[contains(@class,"pb_list_pager")]/a[contains(text(),"‰∏ã‰∏ÄÈ°µ")][@href]',
                    pageElement: 'css;#j_p_postlist > div',
                    insertPosition: ['css;#j_p_postlist', 3],
                    replaceE: 'css;li.pb_list_pager',
                    scrollDelta: 1000
                }
            },
            baidu_tieba_search: { // ÁôæÂ∫¶Ë¥¥Âêß - ÊêúÁ¥¢È°µ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//a[@class="next"][@href]',
                    pageElement: 'css;.s_post_list > .s_post',
                    insertPosition: ['css;.s_post_list', 3],
                    replaceE: 'css;.pager.pager-search',
                    scrollDelta: 1000
                }
            },
            douban_subject_comments: { // Ë±ÜÁì£ - Áü≠ËØÑ
                SiteTypeID: 0,
                host: 'movie.douban.com',
                functionStart: function() {if (location.pathname.indexOf('/subject') > -1 && location.pathname.indexOf('/comments') > -1) { // Áü≠ËØÑÂàóË°®
                    curSite = DBSite.douban_subject_comments;
                } else if (location.pathname.indexOf('/subject') > -1 && location.pathname.indexOf('/reviews') > -1) { // ÂΩ±ËØÑÂàóË°®
                    curSite = DBSite.douban_subject_reviews;
                } else if(location.pathname.indexOf('/subject') > -1 && location.pathname.indexOf('/episode') > -1) { // ÁîµËßÜÂâßÊØèÈõÜËØÑËÆ∫
                    curSite = DBSite.douban_subject_episode;
                }},
                pager: {
                    type: 1,
                    nextLink: '//a[@class="next"][@href]',
                    pageElement: 'css;#comments > .comment-item',
                    insertPosition: ['css;#paginator', 1],
                    replaceE: 'css;#paginator',
                    scrollDelta: 1000
                }
            },
            douban_subject_reviews: { // Ë±ÜÁì£ - ÂΩ±ËØÑ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//link[@rel="next"][@href]',
                    pageElement: 'css;.review-list > div',
                    insertPosition: ['css;.review-list', 3],
                    replaceE: 'css;.paginator',
                    scrollDelta: 1000
                }
            },
            douban_subject_episode: { // Ë±ÜÁì£ - ÂâßËØÑ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//link[@rel="next"][@href]',
                    pageElement: 'css;#comments > div',
                    insertPosition: ['css;#comments', 3],
                    replaceE: 'css;.paginator',
                    scrollDelta: 1000
                }
            },
            weibo_comment: { // ÂæÆÂçöËØÑËÆ∫
                SiteTypeID: 0,
                host: 'weibo.com',
                pager: {
                    type: 2,
                    nextLink: 'a[action-type="click_more_comment"]',
                    nextText: 'Êü•ÁúãÊõ¥Â§öc',
                    scrollDelta: 1000
                }
            },
            nga_thread: { // NGA - ÂêÑÁâàÂùóÂ∏ñÂ≠êÂàóË°®
                SiteTypeID: 0,
                host: 'bbs.nga.cn',
                functionStart: function() {if (location.pathname === '/thread.php') { // Â∏ñÂ≠êÂàóË°®
                    curSite = DBSite.nga_thread;
                } else if (location.pathname === '/read.php') { // Â∏ñÂ≠êÂÜÖ
                    curSite = DBSite.nga_read;
                }},
                pager: {
                    type: 1,
                    nextLink: 'css;#pagebbtm a[title="‰∏ã‰∏ÄÈ°µ"][href]',
                    pageElement: 'css;#topicrows > tbody, #topicrows > script',
                    insertPosition: ['css;#topicrows', 3],
                    replaceE: 'css;div[name="pageball"]',
                    scrollDelta: 1000
                },
                function: {
                    after: nga_thread_functionAfter
                }
            },
            nga_read: { // NGA - Â∏ñÂ≠êÂÜÖ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: 'css;#pagebbtm a[title="‰∏ã‰∏ÄÈ°µ"][href]',
                    pageElement: 'id("m_posts_c")/table | id("m_posts_c")/script | //script[contains(text(), "commonui.userInfo.setAll")]',
                    insertPosition: ['css;#m_posts_c', 3],
                    replaceE: 'css;div[name="pageball"]',
                    scrollDelta: 1000
                }
            },
            v2ex_recent: { // V2EX - ÊúÄËøë‰∏ªÈ¢òÈ°µ
                SiteTypeID: 0,
                host: ['v2ex.com', 'www.v2ex.com'],
                functionStart: function() {if (location.pathname === '/') { //                          È¶ñÈ°µ
                    v2ex_functionAfter('#Main a.topic-link:not([target])');
                } else if (location.pathname === '/recent') { //             ÊúÄËøë‰∏ªÈ¢òÈ°µ
                    curSite = DBSite.v2ex_recent;
                    v2ex_functionAfter('#Main a.topic-link:not([target])');
                } else if (location.pathname === '/notifications') { //      ÊèêÈÜíÊ∂àÊÅØÈ°µ
                    curSite = DBSite.v2ex_notifications;
                    v2ex_functionAfter('#Main a[href^="/t/"]:not([target])');
                } else if (location.pathname === '/balance') { //            Ë¥¶Êà∑‰ΩôÈ¢ùÈ°µ
                    curSite = DBSite.v2ex_balance;
                } else if (location.pathname.indexOf('/go/') > -1) { //      ÂàÜÁ±ª‰∏ªÈ¢òÈ°µ
                    curSite = DBSite.v2ex_go;
                    v2ex_functionAfter('#Main a.topic-link:not([target])');
                } else if (location.pathname.indexOf('/replies') > -1) { //  Áî®Êà∑ÂõûÂ§çÈ°µ
                    curSite = DBSite.v2ex_replies;
                    v2ex_functionAfter('#Main a[href^="/t/"]:not([target])');
                }},
                pager: {
                    type: 1,
                    nextLink: '//a[@class="page_current"]/following-sibling::a[1][@href]',
                    pageElement: 'css;.cell.item',
                    insertPosition: ['//div[@id="Main"]//div[@class="box"]//div[@class="cell"][last()]', 1],
                    replaceE: 'css;#Main > .box > .cell[style]:not(.item) > table',
                    scrollDelta: 1500
                },
                function: {
                    after: v2ex_functionAfter,
                    parameter: '#Main a.topic-link:not([target])'
                }
            },
            v2ex_notifications: { // V2EX - ÊèêÈÜíÊ∂àÊÅØÈ°µ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//a[@class="page_current"]/following-sibling::a[1][@href]',
                    pageElement: 'css;#notifications > div',
                    insertPosition: ['css;#notifications', 3],
                    replaceE: 'css;#Main > .box > .cell[style] > table',
                    scrollDelta: 1500
                },
                function: {
                    after: v2ex_functionAfter,
                    parameter: '#Main a[href^="/t/"]:not([target])'
                }
            },
            v2ex_replies: { // V2EX - Áî®Êà∑ÂõûÂ§çÈ°µ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//a[@class="page_current"]/following-sibling::a[1][@href]',
                    pageElement: '//div[@id="Main"]//div[@class="box"]//div[@class="dock_area"] | //*[@id="Main"]//div[@class="box"]//div[@class="inner"] | //*[@id="Main"]//div[@class="box"]//div[@class="dock_area"][last()]/following-sibling::div[@class="cell"][1]',
                    insertPosition: ['//div[@id="Main"]//div[@class="box"]//div[@class="cell"][last()]', 1],
                    replaceE: 'css;#Main > .box > .cell[style] > table',
                    scrollDelta: 1500
                },
                function: {
                    after: v2ex_functionAfter,
                    parameter: '#Main a[href^="/t/"]:not([target])'
                }
            },
            v2ex_go: { // V2EX - ÂàÜÁ±ª‰∏ªÈ¢òÈ°µ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//a[@class="page_current"]/following-sibling::a[1][@href]',
                    pageElement: 'css;#TopicsNode > div',
                    insertPosition: ['css;#TopicsNode', 3],
                    replaceE: 'css;#Main > .box > .cell[style] > table',
                    scrollDelta: 1500
                },
                function: {
                    after: v2ex_functionAfter,
                    parameter: '#Main a.topic-link:not([target])'
                }
            },
            v2ex_balance: { // V2EX - Ë¥¶Êà∑‰ΩôÈ¢ùÈ°µ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//a[@class="page_current"]/following-sibling::a[1][@href]',
                    pageElement: 'css;#Main .box > div:not(.cell) > table > tbody > tr:not(:first-child)',
                    insertPosition: ['css;#Main .box > div:not(.cell) > table > tbody', 3],
                    replaceE: 'css;#Main > .box > .cell[style] > table',
                    scrollDelta: 1000
                }
            },
            expreview: { // Ë∂ÖËÉΩÁΩë
                SiteTypeID: 0,
                host: 'www.expreview.com',
                pager: {
                    type: 2,
                    nextLink: '#show_article_red_1SHOW',
                    intervals: 1500,
                    scrollDelta: 1500
                }
            },
            ithome: { // IT ‰πãÂÆ∂
                SiteTypeID: 0,
                host: 'www.ithome.com',
                pager: {
                    type: 2,
                    nextLink: 'a.more',
                    intervals: 1500,
                    scrollDelta: 1500
                }
            },
            _58pic: { // ÂçÉÂõæÁΩë - ÂàÜÁ±ª/ÊêúÁ¥¢È°µ
                SiteTypeID: 0,
                host: 'www.58pic.com',
                functionStart: function() {if (location.pathname.indexOf('/tupian/') > -1) {
                    curSite = DBSite._58pic; document.lastElementChild.appendChild(document.createElement('style')).textContent = '.qtw-card.place-box.is-two {display: none !important;}'; // ÈöêËóèÊú´Â∞æÂæàÂ§ßÁöÑ [‰∏ã‰∏ÄÈ°µ] ÊåâÈíÆ
                } else if (location.pathname.indexOf('/c/') > -1) {
                    curSite = DBSite._58pic_c;
                }},
                pager: {
                    type: 1,
                    nextLink: '//div[contains(@class,"page-box")]//a[text()="‰∏ã‰∏ÄÈ°µ"][@href]',
                    pageElement: 'css;.pic-box > .qtw-card',
                    insertPosition: ['css;.pic-box', 3],
                    replaceE: 'css;.page-box',
                    scrollDelta: 2000
                },
                function: {
                    before: _58pic_functionBefore
                }
            },
            _58pic_c: { // ÂçÉÂõæÁΩë - ‰∏ìÈ¢ò/Êî∂ËóèÂ§π
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//div[contains(@class,"page-box")]//a[text()="‰∏ã‰∏ÄÈ°µ"][@href]',
                    pageElement: 'css;.list-box > .qtw-card',
                    insertPosition: ['css;.list-box', 3],
                    replaceE: 'css;.page-box',
                    scrollDelta: 4000
                },
                function: {
                    before: _58pic_functionBefore
                }
            },
            pixabay: { // PixabayÔºàÈÉΩÊòØÊêúÁ¥¢È°µÔºâ
                SiteTypeID: 0,
                host: 'pixabay.com',
                pager: {
                    type: 1,
                    nextLink: '//a[text()="Next page"][@href]',
                    pageElement: 'css;[class^="results"]  > [class^="container"] > div',
                    insertPosition: ['css;[class^="results"]  > [class^="container"]', 3],
                    replaceE: '//a[text()="Next page"][@href]',
                    scrollDelta: 2000
                },
                function: {
                    before: pixabay_functionBefore
                }
            },
            _3dmgame: { // 3DM
                SiteTypeID: 0,
                host: 'www.3dmgame.com',
                pager: {
                    type: 3,
                    nextLink: '//li[@class="next"]/a[@href]',
                    pageElement: 'css;.news_warp_center > *',
                    insertPosition: ['css;.news_warp_center', 3],
                    replaceE: 'css;.pagewrap',
                    scrollElement: '.pagewrap',
                    scrollDelta: 400
                }
            },
            ali213_www: { // Ê∏∏‰æ†ÁΩë
                SiteTypeID: 0,
                host: 'www.ali213.net',
                pager: {
                    type: 3,
                    nextLink: 'id("after_this_page")[@href]',
                    pageElement: 'css;#Content >*:not(.news_ding):not(.page_fenye)',
                    insertPosition: ['css;.page_fenye', 1],
                    replaceE: 'css;.page_fenye',
                    scrollElement: '.page_fenye',
                    scrollDelta: 400
                }
            },
            ali213_gl: { // Ê∏∏‰æ†ÁΩë - ÊîªÁï•
                SiteTypeID: 0,
                host: 'gl.ali213.net',
                functionStart: function() {curSite = DBSite.ali213_gl; document.lastElementChild.appendChild(document.createElement('style')).textContent = '.n_show_b {display: none !important;}';},
                pager: {
                    type: 3,
                    nextLink: '//a[@class="next n"][@href]',
                    pageElement: 'css;.c-detail >*',
                    insertPosition: ['css;.c-detail', 3],
                    replaceE: 'css;.page_fenye',
                    scrollElement: '.page_fenye',
                    scrollDelta: 400
                }
            },
            ali213_pic: { // Ê∏∏‰æ†ÁΩë - ÂõæÂ∫ì
                SiteTypeID: 0,
                host: 'pic.ali213.net',
                functionStart: function() {curSite = DBSite.ali213_pic; document.lastElementChild.appendChild(document.createElement('style')).textContent = 'a.prev, a.next {display: none !important;}';},
                pager: {
                    type: 1,
                    nextLink: 'css;a.next[href]',
                    pageElement: 'css;#image-show > img',
                    insertPosition: ['css;#image-show', 3],
                    replaceE: 'css;#image-show > a',
                    scrollDelta: 1200
                }
            },
            gamersky_ent: { // Ê∏∏Ê∞ëÊòüÁ©∫
                SiteTypeID: 0,
                host: 'www.gamersky.com',
                functionStart: function() {if (location.pathname.indexOf('/ent/') > -1) {curSite = DBSite.gamersky_ent;} else {curSite = DBSite.gamersky_gl;}},
                pager: {
                    type: 3,
                    nextLink: '//div[@class="page_css"]/a[text()="‰∏ã‰∏ÄÈ°µ"][@href]',
                    pageElement: 'css;.Mid2L_con > *:not(.gs_nc_editor):not(.pagecss):not(.page_css):not(.gs_ccs_solve):not(.post_ding)',
                    insertPosition: ['css;.page_css', 1],
                    replaceE: 'css;.page_css',
                    scrollElement: '.page_css',
                    scrollDelta: 100
                }
            },
            gamersky_gl: { // Ê∏∏Ê∞ëÊòüÁ©∫ - ÊîªÁï•
                SiteTypeID: 0,
                pager: {
                    type: 3,
                    nextLink: '//div[@class="page_css"]/a[text()="‰∏ã‰∏ÄÈ°µ"][@href]',
                    pageElement: 'css;.Mid2L_con > *:not(.gs_nc_editor):not(.pagecss):not(.gs_ccs_solve):not(.post_ding)',
                    insertPosition: ['css;.gs_nc_editor', 1],
                    replaceE: 'css;.page_css',
                    scrollElement: '.pagecss',
                    scrollDelta: -1000
                },
                function: {
                    before: gamersky_gl_functionBefore
                }
            },
            steamcommunity: { // ÂàõÊÑèÂ∑•Âùä - È°πÁõÆÂàóË°®
                SiteTypeID: 0,
                host: 'steamcommunity.com',
                pager: {
                    type: 1,
                    nextLink: '//a[@class="pagebtn"][last()][@href]',
                    pageElement: 'css;.workshopBrowseItems > *',
                    insertPosition: ['css;.workshopBrowseItems', 3],
                    replaceE: 'css;.workshopBrowsePaging',
                    scrollDelta: 1500
                }
            },
            yikm: { // Â∞èÈú∏ÁéãÂÖ∂‰πêÊó†Á©∑
                SiteTypeID: 0,
                host: 'www.yikm.net',
                pager: {
                    type: 1,
                    nextLink: '//ul[@class="pager"]//a[text()="‰∏ã‰∏ÄÈ°µ"]',
                    pageElement: '//h2[contains(text(), "ÊâÄÊúâÊ∏∏Êàè") or contains(text(), "ÊêúÁ¥¢ÁªìÊûú")]/following-sibling::div[1]/div',
                    insertPosition: ['//h2[contains(text(), "ÊâÄÊúâÊ∏∏Êàè") or contains(text(), "ÊêúÁ¥¢ÁªìÊûú")]/following-sibling::div[1]', 3],
                    replaceE: 'css;ul.pager',
                    scrollDelta: 1500
                }
            },
            cs_rin_ru: { // ÂêÑÁâàÂùóÂ∏ñÂ≠êÂàóË°®
                SiteTypeID: 0,
                host: 'cs.rin.ru',
                functionStart: function() {if (location.pathname === '/forum/viewforum.php') { // ÁâàÂùóÂ∏ñÂ≠êÂàóË°®
                    curSite = DBSite.cs_rin_ru;
                } else if (location.pathname === '/forum/viewtopic.php') { // Â∏ñÂ≠êÂÜÖ
                    if (GM_getValue('menu_discuz_thread_page')) curSite = DBSite.cs_rin_ru_viewtopic;
                } else if (location.pathname === '/forum/search.php') { // ÊêúÁ¥¢ÁªìÊûú
                    curSite = DBSite.cs_rin_ru_search;
                }},
                pager: {
                    type: 1,
                    nextLink: '//td[@class="gensmall"][@align="right"]//a[text()="Next"][@href]',
                    pageElement: 'css;#pagecontent > table.tablebg > tbody > tr:not([align])',
                    insertPosition: ['css;#pagecontent > table.tablebg > tbody > tr[align]', 1],
                    replaceE: 'css;#pagecontent > table:first-child',
                    scrollDelta: 1500
                },
                function: {
                    before: cs_rin_ru_functionBefore
                }
            },
            cs_rin_ru_viewtopic: { // Â∏ñÂ≠êÂÜÖ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: 'id("pageheader")/p[@class="gensmall"]//a[text()="Next"][@href]',
                    pageElement: 'css;#pagecontent > table.tablebg:not(:nth-last-child(2)):not(:nth-child(2))',
                    insertPosition: ['css;#pagecontent > table.tablebg:nth-last-child(2)', 1],
                    replaceE: 'css;#pagecontent >table:not(.tablebg), #pageheader p.gensmall',
                    scrollDelta: 1500
                }
            },
            cs_rin_ru_search: { // ÊêúÁ¥¢È°µ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: 'id("wrapcentre")/div[@class="nav"]//a[text()="Next"]',
                    pageElement: 'css;#wrapcentre > form > table.tablebg > tbody > tr[valign]',
                    insertPosition: ['css;#wrapcentre > form > table.tablebg > tbody > tr:last-child', 1],
                    replaceE: 'css;#wrapcentre > div',
                    scrollDelta: 1500
                }
            },
            crackhub: {
                SiteTypeID: 0,
                host: 'crackhub.site',
                functionStart: function() {curSite = DBSite.crackhub; document.lastElementChild.appendChild(document.createElement('style')).textContent = 'html.wp-dark-mode-active .inside-article {background-color: var(--wp-dark-mode-bg);}';},
                pager: {
                    type: 1,
                    nextLink: '//a[@class="next page-numbers"][@href]',
                    pageElement: 'css;article[id^="post-"]',
                    insertPosition: ['css;nav.paging-navigation', 1],
                    replaceE: 'css;nav.paging-navigation',
                    scrollDelta: 2000
                }
            },
            fitgirl: {
                SiteTypeID: 0,
                host: 'fitgirl-repacks.site',
                pager: {
                    type: 1,
                    nextLink: '//a[@class="next page-numbers"][@href]',
                    pageElement: 'css;article[id^="post-"]',
                    insertPosition: ['css;nav.paging-navigation', 1],
                    replaceE: 'css;nav.paging-navigation',
                    scrollDelta: 2000
                }
            },
            mypianku: { // ÁâáÂ∫ì
                SiteTypeID: 0,
                host: 'www.mypianku.net',
                pager: {
                    type: 1,
                    nextLink: 'css;a.a1[href]',
                    pageElement: 'css;.content-list > li',
                    insertPosition: ['css;.content-list', 3],
                    replaceE: 'css;.pages',
                    scrollDelta: 1500
                },
                function: {
                    before: mypianku_functionBefore
                }
            },
            yinfans: { // Èü≥ËåÉ‰∏ù
                SiteTypeID: 0,
                host: 'www.yinfans.net',
                pager: {
                    type: 1,
                    nextLink: 'css;a.next[href]',
                    pageElement: 'css;#post_container > li',
                    insertPosition: ['css;#post_container', 3],
                    replaceE: 'css;.pagination',
                    scrollDelta: 1500
                }
            },
            btbtt: { // BT ‰πãÂÆ∂
                SiteTypeID: 0,
                host: 'btbtt',
                pager: {
                    type: 1,
                    nextLink: '//div[@class="page"]/a[contains(text(), "‚ñ∂") or contains(text(), "‰∏ã‰∏ÄÈ°µ")]',
                    pageElement: 'css;#threadlist > table, #threadlist > hr',
                    insertPosition: ['css;#threadlist', 3],
                    replaceE: 'css;.page',
                    scrollDelta: 2000
                }
            },
            gaoqing_fm: { // È´òÊ∏ÖÁîµÂè∞
                SiteTypeID: 0,
                host: 'gaoqing.fm',
                pager: {
                    type: 2,
                    nextLink: '.col-md-12 > a[href], #loadmore > a[href]',
                    intervals: 1500,
                    scrollDelta: 1000
                }
            },
            kisssub: { // Áà±ÊÅãÂä®Êº´
                SiteTypeID: 0,
                host: 'www.kisssub.org',
                pager: {
                    type: 1,
                    nextLink: 'css;a.nextprev',
                    pageElement: 'css;#data_list > tr',
                    insertPosition: ['css;#data_list', 3],
                    replaceE: 'css;.pages',
                    scrollDelta: 2500
                }
            },
            nyaa: { // Nyaa
                SiteTypeID: 0,
                host: 'nyaa.si',
                pager: {
                    type: 1,
                    nextLink: '//a[@rel="next"][@href] | //li[@class="next"]/a[@href]',
                    pageElement: 'css;table.torrent-list > tbody > tr',
                    insertPosition: ['css;table.torrent-list > tbody', 3],
                    replaceE: 'css;ul.pagination',
                    scrollDelta: 2000
                }
            },
            skrbtba: { // SkrBT
                SiteTypeID: 0,
                host: 'skrbtca.xyz',
                functionStart: function() {if (location.pathname === '/search') curSite = DBSite.skrbtba;},
                pager: {
                    type: 1,
                    nextLink: '//a[@aria-label="Next"]',
                    pageElement: 'css;div[class="row"] > .col-md-6 > ul',
                    insertPosition: ['css;nav[aria-label*="Page"]', 1],
                    replaceE: 'css;ul.pagination',
                    scrollDelta: 900
                }
            },
            rarbgprx: { // RARBG
                SiteTypeID: 0,
                host: 'rarbgprx.org',
                pager: {
                    type: 1,
                    nextLink: '(//a[@title="next page"])[1][@href]',
                    pageElement: 'css;table.lista2t tr.lista2',
                    insertPosition: ['css;table.lista2t > tbody', 3],
                    replaceE: 'css;#pager_links',
                    scrollDelta: 900
                }
            },
            baoshuu: { // ÂÆù‰π¶ÁΩëÔºàÂ∞èËØ¥Ôºâ
                SiteTypeID: 0,
                host: 'www.baoshuu.com',
                functionStart: function() {if (location.pathname.indexOf('/TXT/list') > -1) curSite = DBSite.baoshuu;},
                pager: {
                    type: 1,
                    nextLink: '//div[@class="listl2"]//a[@href][text()="‰∏ã‰∏ÄÈ°µ"]',
                    pageElement: 'css;.listl2 > ul > li',
                    insertPosition: ['css;.listl2 > ul', 3],
                    replaceE: 'css;listl2 > dl',
                    mimeType: 'text/html; charset=gb2312',
                    scrollDelta: 900
                }
            },
            baoshuu_m: { // ÂÆù‰π¶ÁΩëÔºàÂ∞èËØ¥Ôºâ- ÊâãÊú∫Áâà
                SiteTypeID: 0,
                host: 'm.baoshuu.com',
                functionStart: function() {if (location.pathname.indexOf('/TXT/list') > -1) curSite = DBSite.baoshuu_m;},
                pager: {
                    type: 1,
                    nextLink: '//div[@class="man_first"]//a[@href][text()="‰∏ã‰∏ÄÈ°µ"]',
                    pageElement: 'css;.man_first > ul > li',
                    insertPosition: ['css;.man_first > ul', 3],
                    replaceE: 'css;.man_first > dl',
                    mimeType: 'text/html; charset=gb2312',
                    scrollDelta: 900
                }
            },
            _423down: {
                SiteTypeID: 0,
                host: 'www.423down.com',
                functionStart: function() {if (location.pathname.indexOf('.html') === -1) curSite = DBSite._423down;},
                pager: {
                    type: 1,
                    nextLink: '//div[@class="paging"]//a[contains(text(),"‰∏ã‰∏ÄÈ°µ")][@href]',
                    pageElement: 'css;div.content-wrap ul.excerpt > li',
                    insertPosition: ['css;div.content-wrap ul.excerpt', 3],
                    replaceE: 'css;div.paging',
                    scrollDelta: 1500
                }
            },
            iao_su: { // ‰∏çÊ≠ªÈ∏ü
                SiteTypeID: 0,
                host: 'iao.su',
                pager: {
                    type: 1,
                    nextLink: '//li[@class="btn btn-primary next"]//a[@href]',
                    pageElement: 'css;#index > article, #archive > article',
                    insertPosition: ['css;ol.page-navigator', 1],
                    replaceE: 'css;ol.page-navigator',
                    scrollDelta: 1000
                },
                function: {
                    before: iao_su_functionBefore
                }
            },
            appinn: { // Â∞è‰ºóËΩØ‰ª∂
                SiteTypeID: 0,
                host: 'www.appinn.com',
                pager: {
                    type: 1,
                    nextLink: '//a[@class="next page-numbers"][@href]',
                    pageElement: 'css;section#latest-posts > article',
                    insertPosition: ['css;nav.navigation.pagination', 1],
                    replaceE: 'css;div.nav-links',
                    scrollDelta: 1500
                }
            },
            chrome_zzzmh: { // ÊûÅÁÆÄÊèí‰ª∂
                SiteTypeID: 0,
                host: 'chrome.zzzmh.cn',
                pager: {
                    type: 2,
                    nextLink: 'button.more-btn',
                    intervals: 1000,
                    scrollDelta: 1500
                }
            },
            isharepc: { // ‰πêËΩØÂçöÂÆ¢
                SiteTypeID: 0,
                host: 'www.isharepc.com',
                pager: {
                    type: 1,
                    nextLink: 'css;a.next[href]',
                    pageElement: 'css;.content > div',
                    insertPosition: ['css;nav.pagination', 1],
                    replaceE: 'css;nav.pagination',
                    scrollDelta: 1000
                }
            },
            pc521: { // ‰∏çÂøòÂàùÂøÉ
                SiteTypeID: 0,
                host: 'www.pc521.net',
                functionStart: function() {if (location.search.slice(0,3) === '?s=') {curSite = DBSite.pc521_search;} else {curSite = DBSite.pc521;}},
                pager: {
                    type: 2,
                    nextLink: 'div[id^="ias_trigger_"]',
                    intervals: 1000,
                    scrollDelta: 1000
                }
            },
            pc521_search: { // ‰∏çÂøòÂàùÂøÉ - ÊêúÁ¥¢È°µ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: 'css;a.next[href]',
                    pageElement: 'css;#main > ul > li',
                    insertPosition: ['css;#main > ul', 3],
                    replaceE: 'css;nav.pagination',
                    scrollDelta: 1500
                }
            },
            ghxi: { // ÊûúÊ†∏Ââ•Â£≥ - È¶ñÈ°µ
                SiteTypeID: 0,
                host: 'www.ghxi.com',
                functionStart: function() {if (location.pathname === '/' && !location.search) {curSite = DBSite.ghxi;} else {curSite = DBSite.ghxi_postlist;}},
                pager: {
                    type: 2,
                    nextLink: '.load-more',
                    intervals: 1000,
                    scrollDelta: 5000
                }
            },
            ghxi_postlist: { // ÊûúÊ†∏Ââ•Â£≥ - ÂàÜÁ±ª/ÊêúÁ¥¢È°µ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: 'css;a.next[href]',
                    pageElement: 'css;ul.post-loop > li',
                    insertPosition: ['css;ul.post-loop', 3],
                    replaceE: 'css;ul.pagination',
                    scrollDelta: 1500
                },
                function: {
                    before: ghxi_postlist_functionBefore
                }
            },
            sixyin: { // ÂÖ≠Èü≥ËΩØ‰ª∂ - È¶ñÈ°µ
                SiteTypeID: 0,
                host: 'www.sixyin.com',
                functionStart: function() {if (location.pathname === '/' && location.search === '') { // È¶ñÈ°µ
                    curSite = DBSite.sixyin;
                } else if (location.pathname.indexOf('.html') === -1) { //    ÂàÜÁ±ªÈ°µ
                    curSite = DBSite.sixyin_postlist;
                }},
                pager: {
                    type: 2,
                    nextLink: '.load-more',
                    nextHTML: 'ÁÇπÂáªÊü•ÁúãÊõ¥Â§ö',
                    scrollDelta: 1500
                }
            },
            sixyin_postlist: { // ÂÖ≠Èü≥ËΩØ‰ª∂ - ÂàÜÁ±ªÈ°µ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//a[@class="next"][@href]',
                    pageElement: 'css;ul.post-loop > li',
                    insertPosition: ['css;ul.post-loop', 3],
                    replaceE: 'css;ul.pagination',
                    scrollDelta: 1500
                }
            },
            weidown: { // ÂæÆÂΩì‰∏ãËΩΩ
                SiteTypeID: 0,
                host: 'www.weidown.com',
                functionStart: function() {if (location.pathname.indexOf('/search/') > -1) { //ÊêúÁ¥¢È°µ
                    curSite = DBSite.weidown_search;
                } else if (location.pathname.indexOf('/special/') > -1) { // ‰∏ìÈ¢òÈ°µ
                    curSite = DBSite.weidown_special;
                } else {
                    curSite = DBSite.weidown;
                }},
                pager: {
                    type: 1,
                    nextLink: '//a[@class="nextpage"][@href]',
                    pageElement: 'css;.articleWrapper > .itemArticle, .articleWrapper > .richTextItem.search',
                    insertPosition: ['css;.articleWrapper', 3],
                    replaceE: 'css;#pageGroup',
                    scrollDelta: 1500
                }
            },
            weidown_search: { // ÂæÆÂΩì‰∏ãËΩΩ - ÊêúÁ¥¢È°µ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//a[@class="nextpage"][@href]',
                    pageElement: 'css;.articleListWrapper > .richTextItem.search',
                    insertPosition: ['css;#pageGroup', 1],
                    replaceE: 'css;#pageGroup',
                    scrollDelta: 700
                }
            },
            weidown_special: { // ÂæÆÂΩì‰∏ãËΩΩ - ‰∏ìÈ¢òÈ°µ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//a[@class="nextpage"][@href]',
                    pageElement: 'css;.special > .item',
                    insertPosition: ['css;.special', 3],
                    replaceE: 'css;#pageGroup',
                    scrollDelta: 700
                }
            },
            th_sjy: { // th-sjy Ê±âÂåñ
                SiteTypeID: 0,
                host: 'www.th-sjy.com',
                pager: {
                    type: 1,
                    nextLink: 'css;li.next-page > a',
                    pageElement: 'css;.content > article',
                    insertPosition: ['css;.pagination', 1],
                    replaceE: 'css;.pagination',
                    scrollDelta: 2000
                }
            },
            iplaysoft_postslist: { // ÂºÇÊ¨°ÂÖÉËΩØ‰ª∂‰∏ñÁïå
                SiteTypeID: 0,
                host: 'www.iplaysoft.com',
                functionStart: function() {if (location.pathname.indexOf('.html') > -1 || location.pathname.indexOf('/p/') > -1) { // ÊñáÁ´†ÂÜÖ
                    curSite = DBSite.iplaysoft_postcomments;
                } else { // ÂÖ∂‰ªñÈ°µÈù¢
                    curSite = DBSite.iplaysoft_postslist;
                }},
                pager: {
                    type: 1,
                    nextLink: '//div[@class="pagenavi"]//a[@title="‰∏ã‰∏ÄÈ°µ"][@href]',
                    pageElement: 'css;#postlist > div.entry',
                    insertPosition: ['css;#postlist > .pagenavi-button', 1],
                    replaceE: 'css;.pagenavi-button, .pagenavi',
                    scrollDelta: 1200
                },
                function: {
                    before: iplaysoft_postslist_functionBefore
                }
            },
            iplaysoft_postcomments: { // ÂºÇÊ¨°ÂÖÉËΩØ‰ª∂‰∏ñÁïå - ËØÑËÆ∫
                SiteTypeID: 0,
                pager: {
                    type: 2,
                    nextLink: '#loadHistoryComments',
                    nextTextOf: 'Â±ïÂºÄÂêéÈù¢',
                    scrollDelta: 1200
                }
            },
            mpyit: { // ËÄÅÊÆÅ | ÊÆÅÊºÇÈÅ•
                SiteTypeID: 0,
                host: 'www.mpyit.com',
                functionStart: function() {if (location.pathname === '/' && !location.search) {
                    curSite = DBSite.mpyit;
                } else if (location.pathname.indexOf('/category/') > -1 || location.search.indexOf('?s=') > -1) { // ÊêúÁ¥¢È°µ / ÂàÜÁ±ªÈ°µ
                    curSite = DBSite.mpyit_category;
                }},
                pager: {
                    type: 1,
                    nextLink: '//a[@class="page-numbers"][@title="‰∏ã‰∏ÄÈ°µ"][@href]',
                    pageElement: 'css;#post > div[id^="post-"]',
                    insertPosition: ['css;#post > #pagenavi', 1],
                    replaceE: 'css;#post > #pagenavi',
                    scrollDelta: 1700
                }
            },
            mpyit_category: { // ËÄÅÊÆÅ | ÊÆÅÊºÇÈÅ• - ÊêúÁ¥¢È°µ/ÂàÜÁ±ªÈ°µ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//a[@class="page-numbers"][@title="‰∏ã‰∏ÄÈ°µ"][@href]',
                    pageElement: 'css;#content > div[class^="entry_box"]',
                    insertPosition: ['css;#content > #pagenavi', 1],
                    replaceE: 'css;#content > #pagenavi',
                    scrollDelta: 1700
                }
            },
            yxssp: { // ÂºÇÊòüËΩØ‰ª∂Á©∫Èó¥
                SiteTypeID: 0,
                host: 'www.yxssp.com',
                pager: {
                    type: 1,
                    nextLink: '//div[@class="page-nav td-pb-padding-side"]/a[last()][@href]',
                    pageElement: 'css;.td-modules-container.td-module-number4 > div',
                    insertPosition: ['css;.td-modules-container.td-module-number4', 3],
                    replaceE: 'css;.page-nav.td-pb-padding-side',
                    scrollDelta: 1000
                }
            },
            sordum: {
                SiteTypeID: 0,
                host: 'www.sordum.org',
                pager: {
                    type: 1,
                    nextLink: '//a[@class="next page-numbers"][@href]',
                    pageElement: 'css;.article > article',
                    insertPosition: ['css;nav.navigation.posts-navigation', 1],
                    replaceE: 'css;nav.navigation.posts-navigation',
                    scrollDelta: 1500
                }
            },
            winaero: {
                SiteTypeID: 0,
                host: 'winaero.com',
                functionStart: function() {if (location.pathname === '/blog/' || location.pathname.indexOf('/category/') > -1) curSite = DBSite.winaero;},
                pager: {
                    type: 1,
                    nextLink: 'css;.nav-previous > a',
                    pageElement: 'css;#content > article',
                    insertPosition: ['css;#nav-below', 1],
                    replaceE: 'css;#nav-below',
                    scrollDelta: 1500
                }
            },
            thewindowsclub: {
                SiteTypeID: 0,
                host: 'www.thewindowsclub.com',
                functionStart: function() {curSite = DBSite.thewindowsclub; if (location.pathname === '/') {curSite.pager.scrollDelta = 2000;}},
                pager: {
                    type: 1,
                    nextLink: 'css;li.pagination-next > a',
                    pageElement: 'css;#genesis-content > article',
                    insertPosition: ['css;.pagination', 1],
                    replaceE: 'css;.pagination',
                    scrollDelta: 1500
                }
            },
            cartoonmad: { // Âä®Êº´ÁãÇ
                SiteTypeID: 0,
                host: ['www.cartoonmad.com','www.cartoonmad.cc'],
                functionStart: function() {if (location.pathname.indexOf('/comic/') > -1) {
                    document.lastElementChild.appendChild(document.createElement('style')).textContent = 'body > table > tbody > tr:nth-child(4) > td > table > tbody > tr:first-child > td:not(:first-child) {display: none !important;} body > table > tbody > tr:nth-child(4) > td > table > tbody > tr:first-child > td:first-child img {max-width: 100%;height: auto;display: block !important;margin: 0 auto !important;}';
                    document.querySelector('body > table > tbody > tr:nth-child(4) > td > table > tbody > tr:first-child > td:first-child > a').href = 'javascript:void(0);'; // Ê∏ÖÁêÜÂõæÁâá‰∏äÁöÑÈìæÊé•
                    curSite = DBSite.cartoonmad;
                }},
                pager: {
                    type: 1,
                    nextLink: cartoonmad_functionNext,
                    pageElement: 'css;body > table > tbody > tr:nth-child(4) > td > table > tbody > tr:first-child > td:first-child img',
                    insertPosition: ['css;body > table > tbody > tr:nth-child(4) > td > table > tbody > tr:first-child > td:first-child > a', 3],
                    replaceE: 'css;body > table > tbody > tr:nth-child(2), body > table > tbody > tr:nth-child(5)',
                    mimeType: 'text/html; charset=big5',
                    scrollDelta: 2000
                }
            },
            manhuadb: { // Êº´Áîª DB
                SiteTypeID: 0,
                host: 'www.manhuadb.com',
                functionStart: function() {if (location.pathname.indexOf('/manhua/') > -1 && location.pathname.indexOf('.html') > -1) {
                    document.lastElementChild.appendChild(document.createElement('style')).textContent = '.row.m-0.pt-3.ad_2_wrap, .row.m-0.ad_1_wrap, .pagination.justify-content-center, #left, #right {display: none !important;}';
                    document.querySelector('img.img-fluid.show-pic').style.display = 'none'; // ÈöêËóèÁ¨¨‰∏Ä‰∏™ÂõæÁâáÔºàÈÅøÂÖçÈáçÂ§çÔºâ
                    setTimeout(manhuadb_init, 100);
                    curSite = DBSite.manhuadb;
                }},
                pager: {
                    type: 4,
                    nextLink: manhuadb_functionNext,
                    pageElement: 'css;body > script:not([type]):not([src]), .vg-r-data, ol.links-of-books.num_div',
                    insertPosition: ['css;.pjax-container', 3],
                    insertElement: manhuadb_insertElement,
                    intervals: 5000,
                    scrollDelta: 3000
                }
            },
            hicomic: { // Âó®Êº´Áîª
                SiteTypeID: 0,
                host: 'www.hicomic.net',
                functionStart: function() {if (location.pathname.indexOf('/chapters/') > -1) {
                    document.lastElementChild.appendChild(document.createElement('style')).textContent = '.content {height: auto !important;} .footer, .left_cursor, .right_cursor, .finish {display: none !important;} .content > img {display: block !important;margin: 0 auto !important;}';
                    setTimeout(hicomic_init, 100);
                    curSite = DBSite.hicomic;
                }},
                pager: {
                    type: 4,
                    nextLink: hicomic_functionNext,
                    insertPosition: ['css;.content', 3],
                    insertElement: hicomic_insertElement,
                    intervals: 5000,
                    scrollDelta: 3000
                }
            },
            gufengmh8: { // Âè§È£éÊº´ÁîªÁΩë
                SiteTypeID: 0,
                host: 'www.gufengmh8.com',
                functionStart: function() {if (location.pathname.indexOf('.html') > -1) {
                    let chapterScroll = document.getElementById('chapter-scroll') // Âº∫Âà∂‰∏∫ [‰∏ãÊãâÈòÖËØª] Ê®°Âºè
                    if (chapterScroll && chapterScroll.className === '') {chapterScroll.click();}
                    curSite = DBSite.gufengmh8; document.lastElementChild.appendChild(document.createElement('style')).textContent = 'p.img_info {display: none !important;}'; // ÈöêËóè‰∏≠Èó¥ÁöÑÈ°µÊï∞‰ø°ÊÅØ
                }},
                pager: {
                    type: 4,
                    nextLink: gufengmh8_functionNext,
                    pageElement: 'css;body > script:first-child',
                    insertPosition: ['css;#images', 3],
                    insertElement: gufengmh8_insertElement,
                    intervals: 5000,
                    scrollDelta: 4000
                }
            },
            szcdmj: { // Á†Ç‰πãËàπÂä®Êº´ÂÆ∂
                SiteTypeID: 0,
                host: 'www.szcdmj.com',
                functionStart: function() {if (location.pathname.indexOf('/szcchapter/') > -1) {curSite = DBSite.szcdmj; document.lastElementChild.appendChild(document.createElement('style')).textContent = '.header {opacity: 0.3 !important;}';}},
                pager: {
                    type: 1,
                    nextLink: '//div[@class="fanye"][1]/a[@href][text()="‰∏ã‰∏ÄÈ°µ" or text()="‰∏ã‰∏ÄËØù"]',
                    pageElement: 'css;.comicpage > div,title',
                    insertPosition: ['css;.comicpage', 3],
                    replaceE: 'css;.fanye,h1.title',
                    scrollDelta: 2000
                },
                function: {
                    before: szcdmj_functionBefore
                }
            },
            netbian: { // ÂΩºÂ≤∏ÂõæÁΩë
                SiteTypeID: 0,
                host: 'pic.netbian.com',
                functionStart: function() {curSite = DBSite.netbian; document.lastElementChild.appendChild(document.createElement('style')).textContent = 'li.nextpage {display: none !important;}';},
                pager: {
                    type: 1,
                    nextLink: '//div[@class="page"]/a[contains(text(),"‰∏ã‰∏ÄÈ°µ")]',
                    pageElement: 'css;.slist ul > li:not(.nextpage)',
                    insertPosition: ['css;.slist ul', 3],
                    replaceE: 'css;.page',
                    mimeType: 'text/html; charset=gbk',
                    scrollDelta: 1000
                }
            },
            pubmed: { // Â≠¶ÊúØ
                SiteTypeID: 0,
                host: 'pubmed.ncbi.nlm.nih.gov',
                pager: {
                    type: 2,
                    nextLink: 'button.load-button.next-page',
                    nextText: 'Show more',
                    scrollDelta: 1500
                }
            },
            afreecatv: { // Áõ¥Êí≠
                SiteTypeID: 0,
                host: 'www.afreecatv.com',
                pager: {
                    type: 2,
                    nextLink: '.btn-more > button',
                    intervals: 2000,
                    scrollDelta: 1000
                }
            },
            greasyfork: { // ËÑöÊú¨
                SiteTypeID: 0,
                host: 'greasyfork.org',
                functionStart: function() {if (location.pathname.indexOf('/scripts') + 8 === location.pathname.length) {
                    curSite = DBSite.greasyfork;
                } else if (location.pathname.lastIndexOf('/feedback') + 9 === location.pathname.length) {
                    curSite = DBSite.greasyfork_feedback;
                } else if (location.pathname.lastIndexOf('/discussions') + 12 === location.pathname.length) {
                    curSite = DBSite.greasyfork_discussions;
                }},
                pager: {
                    type: 1,
                    nextLink: '//a[@class="next_page"][@href]',
                    pageElement: 'css;ol#browse-script-list > li',
                    insertPosition: ['css;ol#browse-script-list', 3],
                    replaceE: 'css;.pagination',
                    scrollDelta: 1000
                }
            },
            greasyfork_feedback: { // ÂèçÈ¶àÈ°µ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//a[@class="next_page"][@href]',
                    pageElement: 'css;.script-discussion-list > div',
                    insertPosition: ['css;.script-discussion-list', 3],
                    replaceE: 'css;.pagination',
                    scrollDelta: 1500
                }
            },
            greasyfork_discussions: { // ËÆ®ËÆ∫È°µ
                SiteTypeID: 0,
                pager: {
                    type: 1,
                    nextLink: '//a[@class="next_page"][@href]',
                    pageElement: 'css;.discussion-list > div',
                    insertPosition: ['css;.discussion-list', 3],
                    replaceE: 'css;.pagination',
                    scrollDelta: 1000
                }
            }
        };
        // ÁîüÊàê SiteTypeID
        generateID();
        // Áî®‰∫éËÑöÊú¨Âà§Êñ≠ÔºàÈíàÂØπÈÉ®ÂàÜÁâπÊÆäÁöÑÁΩëÁ´ôÔºâ
        SiteType = {
            GOOGLE: DBSite.google.SiteTypeID,
            BAIDU_TIEBA: DBSite.baidu_tieba.SiteTypeID,
            GAMERSKY_GL: DBSite.gamersky_gl.SiteTypeID,
            STEAMCOMMUNITY: DBSite.steamcommunity.SiteTypeID,
            NGA_THREAD: DBSite.nga_thread.SiteTypeID,
            NGA_READ: DBSite.nga_read.SiteTypeID
        };
    }


    // < ÊâÄÊúâ Discuz!ËÆ∫Âùõ >
    if (webType != 1) {
        if (webType === 2) {
            if (location.pathname.indexOf('.html') > -1) { //                   Âà§Êñ≠ÊòØ‰∏çÊòØÈùôÊÄÅÁΩëÈ°µÔºà.html ÁªìÂ∞æÔºâ
                if (location.pathname.indexOf('/forum-') > -1) { //             < ÂêÑÁâàÂùóÂ∏ñÂ≠êÂàóË°® >
                    if (document.getElementById('autopbn')) { //                Âà§Êñ≠ÊòØÂê¶Êúâ [‰∏ã‰∏ÄÈ°µ] ÊåâÈíÆ
                        curSite = DBSite.discuz_forum;
                    } else {
                        curSite = DBSite.discuz_guide;
                    }
                } else if (location.pathname.indexOf('/thread-') > -1) { //     < Â∏ñÂ≠êÂÜÖ >
                    if (GM_getValue('menu_discuz_thread_page')) {
                        curSite = DBSite.discuz_thread;
                        hidePgbtn(); //                                         ÈöêËóèÂ∏ñÂ≠êÂÜÖÁöÑ [‰∏ã‰∏ÄÈ°µ] ÊåâÈíÆ
                    }
                } else if(location.pathname.indexOf('search') > -1) { //        < ÊêúÁ¥¢ÁªìÊûú >
                    curSite = DBSite.discuz_search;
                }
            } else {
                if (location.search.indexOf('mod=forumdisplay') > -1 || location.pathname.indexOf('forumdisplay.php') > -1) { //      < ÂêÑÁâàÂùóÂ∏ñÂ≠êÂàóË°® >
                    if (document.getElementById('autopbn')) { //                Âà§Êñ≠ÊòØÂê¶Êúâ [‰∏ã‰∏ÄÈ°µ] ÊåâÈíÆ
                        curSite = DBSite.discuz_forum;
                    } else {
                        curSite = DBSite.discuz_guide;
                    }
                } else if (location.search.indexOf('mod=viewthread') > -1 || location.pathname.indexOf('viewthread.php') > -1) { // < Â∏ñÂ≠êÂÜÖ >
                    if (GM_getValue('menu_discuz_thread_page')) {
                        curSite = DBSite.discuz_thread;
                        hidePgbtn(); //                                         ÈöêËóèÂ∏ñÂ≠êÂÜÖÁöÑ [‰∏ã‰∏ÄÈ°µ] ÊåâÈíÆ
                    }
                } else if (location.search.indexOf('mod=guide') > -1) { //      < ÂØºËØªÂ∏ñÂ≠êÂàóË°® >
                    curSite = DBSite.discuz_guide;
                } else if(location.search.indexOf('mod=space') > -1 && location.search.indexOf('&view=me') > -1) { // Âà´‰∫∫ÁöÑ‰∏ªÈ¢ò/ÂõûÂ§ç
                    curSite = DBSite.discuz_youspace;
                } else if (location.search.indexOf('mod=collection') > -1) { // < Ê∑òË¥¥ÂàóË°® >
                    curSite = DBSite.discuz_collection;
                } else if (location.pathname.indexOf('search') > -1) { //       < ÊêúÁ¥¢ÁªìÊûú >
                    curSite = DBSite.discuz_search;
                } else { //                                                     < ËÄÉËôëÂà∞ÈÉ®ÂàÜËÆ∫ÂùõÁöÑÈÉ®ÂàÜÊùøÂùóÂ∏ñÂ≠êÂàóË°® URL ÊòØËá™ÂÆö‰πâÁöÑ >
                    curSite = DBSite.discuz_forum;
                }
            }
            // < ÊâÄÊúâ Flarum ËÆ∫Âùõ >
        } else if (webType === 3) {
            curSite = DBSite.flarum;
            // < ÊâÄÊúâ‰ΩøÁî® WordPress DUX ‰∏ªÈ¢òÁöÑÁΩëÁ´ô >
        } else if (webType === 4) {
            if (location.pathname.indexOf('.html') === -1) curSite = DBSite.dux;
            if (location.host === 'apphot.cc') curSite.pager.scrollDelta = 2500; // ÂØπ‰∫éÈÄüÂ∫¶ÊÖ¢ÁöÑÁΩëÁ´ôÔºåÈúÄË¶ÅÂ¢ûÂä†ÁøªÈ°µÊïèÊÑüÂ∫¶
        }
    }

    pausePageEvent(); // Â∑¶ÈîÆÂèåÂáªÁΩëÈ°µÁ©∫ÁôΩÂ§ÑÊöÇÂÅúÁøªÈ°µ
    curSite.pageUrl = ''; // ‰∏ã‰∏ÄÈ°µURL
    //console.log(curSite);
    pageLoading(); // Ëá™Âä®Êó†ÁºùÁøªÈ°µ


    // ÈöêËóèÂ∏ñÂ≠êÂÜÖÁöÑ [‰∏ã‰∏ÄÈ°µ] ÊåâÈíÆÔºàDiscuz! ËÆ∫ÂùõÔºâ
    function hidePgbtn() {
        document.lastChild.appendChild(document.createElement('style')).textContent = '.pgbtn {display: none;}';
    }


    // dux ÁöÑÊèíÂÖ•ÂâçÂáΩÊï∞ÔºàÂä†ËΩΩÂõæÁâáÔºâ
    function dux_functionBefore(pageElems) {
        pageElems.forEach(function (one) {
            let now = one.querySelector('img.thumb[data-src]')
            if (now) {now.src = now.dataset.src;}
        });
        return pageElems
    }


    // ÁôæÂ∫¶Ë¥¥ÂêßÔºàÂèëÂ∏ñÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂Ôºâ
    function baidu_tieba_1() {
        let button = document.querySelector('.tbui_aside_fbar_button.tbui_fbar_post > a');
        if (button) {
            button.remove();
            document.querySelector('li.tbui_aside_fbar_button.tbui_fbar_down').insertAdjacentHTML(addTo(4), '<li class="tbui_aside_fbar_button tbui_fbar_post"><a href="javascript:void(0);" title="Âõ†‰∏∫ [Ëá™Âä®Êó†ÁºùÁøªÈ°µ] ÁöÑÂéüÂõ†ÔºåËØ∑ÁÇπÂáªËØ•ÊåâÈíÆÂèëÂ∏ñÔºÅ"></a></li>')
            button = document.querySelector('.tbui_aside_fbar_button.tbui_fbar_post > a');
            if (button) {
                button.onclick = function(){
                    let button2 = document.querySelector('div.edui-btn.edui-btn-fullscreen.edui-btn-name-portrait');
                    if (button2) {
                        button2.click();
                    } else {
                        alert('ÊèêÁ§∫ÔºöÁôªÂΩïÂêéÊâçËÉΩÂèëÂ∏ñÔºÅ');
                    }
                    return false;
                }
            }
        }
    }


    // ÁôæÂ∫¶Ë¥¥Âêß ÁöÑÊèíÂÖ•ÂâçÂáΩÊï∞ÔºàÂä†ËΩΩÂõæÁâáÔºâ
    function baidu_tieba_functionBefore(pageElems) {
        pageElems.forEach(function (one) {
            one.querySelectorAll('img.threadlist_pic[data-original]').forEach(function (now) {
                now.src = now.dataset.original;
                now.style.display = 'inline';
            })
        });
        return pageElems
    }


    // NGA ÁöÑÊèíÂÖ•ÂêéÂáΩÊï∞ÔºàÂä†ËΩΩÂêÑÁâàÂùóÂ∏ñÂ≠êÂàóË°®Ê†∑ÂºèÔºâ
    function nga_thread_functionAfter() {
        document.body.appendChild(document.createElement('script')).textContent = 'commonui.topicArg.loadAll();';
    }

    // V2EX ÁöÑÊèíÂÖ•ÂêéÂáΩÊï∞ÔºàÊñ∞Ê†áÁ≠æÈ°µÊâìÂºÄÈìæÊé•Ôºâ
    function v2ex_functionAfter(css) {
        let links = document.querySelectorAll(css);if (!links) return
        links.forEach(function (_this) {_this.target = '_blank';});
    }


    // 58pic ÁöÑÊèíÂÖ•ÂâçÂáΩÊï∞ÔºàÂä†ËΩΩÂõæÁâáÔºâ
    function _58pic_functionBefore(pageElems) {
        let is_one = document.querySelector('.qtw-card.place-box.is-one');
        if (is_one && is_one.style.display != 'none') {is_one.style.display = 'none';}
        pageElems.forEach(function (one) {
            let now = one.querySelector('img.lazy')
            if (now && now.getAttribute('src') != now.dataset.original) {
                now.src = now.dataset.original;
                now.style.display = 'block';
            }
        });
        return pageElems
    }


    // Pixabay ÁöÑÊèíÂÖ•ÂâçÂáΩÊï∞ÔºàÂä†ËΩΩÂõæÁâáÔºâ
    function pixabay_functionBefore(pageElems) {
        pageElems.forEach(function (one) {
            let now = one.querySelector('img[data-lazy-src]')
            if (now) {
                now.src = now.dataset.lazySrc;
                now.removeAttribute('data-lazy-src')
                now.removeAttribute('data-lazy-srcset')
            }
        });
        return pageElems
    }


    // Ê∏∏Ê∞ëÊòüÁ©∫ÊîªÁï• ÁöÑÊèíÂÖ•ÂâçÂáΩÊï∞ÔºàÁßªÈô§‰∏ã‰∏ÄÈ°µÂ∫ïÈÉ®ÁöÑ "Êõ¥Â§öÁõ∏ÂÖ≥ÂÜÖÂÆπËØ∑ÂÖ≥Ê≥®Ôºöxxx" ÊñáÂ≠óÔºâ
    function gamersky_gl_functionBefore(pageElems) {
        pageElems.forEach(function (one) {
            if (one.tagName === 'P' && one.textContent.indexOf('Êõ¥Â§öÁõ∏ÂÖ≥ÂÜÖÂÆπËØ∑ÂÖ≥Ê≥®') > -1) {one.style.display = 'none';}
        });
        return pageElems
    }


    // ÁâáÂ∫ì ÁöÑÊèíÂÖ•ÂâçÂáΩÊï∞ÔºàÂä†ËΩΩÂõæÁâáÔºâ
    function mypianku_functionBefore(pageElems) {
        pageElems.forEach(function (one) {
            let now = one.querySelector('img')
            if (now) {
                now.src = now.dataset.src;
            }
        });
        return pageElems
    }


    // iao.su ÁöÑÊèíÂÖ•ÂâçÂáΩÊï∞ÔºàÂä†ËΩΩÂõæÁâáÔºâ
    function iao_su_functionBefore(pageElems) {
        pageElems.forEach(function (one) {
            let now = one.getElementsByClassName('post-card')[0]
            if (now) {
                now.getElementsByClassName('blog-background')[0].style.backgroundImage = 'url("' + now.getElementsByTagName('script')[0].textContent.split("'")[1] + '")';
                //now.getElementsByClassName('blog-background')[0].style.backgroundImage = 'url("' + RegExp("(?<=loadBannerDirect\\(').*(?=', '',)").exec(now.getElementsByTagName('script')[0].textContent)[0]; + '")';
            }
        });
        return pageElems
    }


    // ÊûúÊ†∏Ââ•Â£≥ ÁöÑÊèíÂÖ•ÂâçÂáΩÊï∞ÔºàÂä†ËΩΩÂõæÁâáÔºâ
    function ghxi_postlist_functionBefore(pageElems) {
        pageElems.forEach(function (one) {
            let now = one.querySelector('img')
            if (now) {
                now.src = now.dataset.original;
            }
        });
        return pageElems
    }


    // iplaysoft ÁöÑÊèíÂÖ•ÂâçÂáΩÊï∞ÔºàÂä†ËΩΩÂõæÁâáÔºâ
    function iplaysoft_postslist_functionBefore(pageElems) {
        pageElems.forEach(function (one) {
            let now = one.querySelector('img.lazyload')
            if (now && !now.src) {
                now.src = now.dataset.src;
                now.setAttribute('srcset', now.dataset.src)
                now.setAttribute('class', 'lazyloaded')
            }
        });
        return pageElems
    }


    // cs_rin_ru ÂêÑÁâàÂùóÂ∏ñÂ≠êÂàóË°®ÁöÑÊèíÂÖ•ÂâçÂáΩÊï∞ÔºàËøáÊª§ÁΩÆÈ°∂Â∏ñÂ≠êÔºâ
    function cs_rin_ru_functionBefore(pageElems) {
        for (let i = 0; i < pageElems.length; i++) {
            if (pageElems[i].textContent.replace(/\n|	/g,'') === 'Topics') {
                pageElems.splice(0,i+1);
                break;
            }
        }
        return pageElems
    }


    // Êº´ÁîªÁãÇ Ëé∑Âèñ‰∏ã‰∏ÄÈ°µÂú∞ÂùÄ
    function cartoonmad_functionNext() {
        let nextXPAHT = '//a[@class="pages"][contains(text(),"‰∏ã‰∏ÄÈ†Å")]',
            nextPXPATH = '//a[@class="pages"][contains(string(),"‰∏ã‰∏ÄË©±")]'
        let url = getElementByXpath(nextXPAHT);
        if (url) {
            if (url.getAttribute('href') === 'thend.asp') {
                url = getElementByXpath(nextPXPATH)
                if (url) return url.href;
                pausePage = false;
                GM_notification({text: `Ê≥®ÊÑèÔºöËØ•ÁΩëÁ´ôÊó©ÊúüÊº´ÁîªÔºàÂ¶ÇÊµ∑Ë¥ºÁéã„ÄÅÊüØÂçóÔºâÂõ†‰∏∫ÁΩëÁ´ôËá™Ë∫´ÈóÆÈ¢òËÄåÊó†Ê≥ïÁøªËá≥‰∏ã‰∏ÄËØùÔºà‰ªÖÈôê‰∫éÊòæÁ§∫‰∏∫ [Á¨¨ X Âç∑]/[‰∏ã‰∏ÄÂç∑] ÁöÑÔºâ„ÄÇ\nÂõ†Ê≠§ÈúÄË¶ÅÊâãÂä®Âéª [ÁõÆÂΩïÈ°µ] ËøõÂÖ•‰∏ã‰∏ÄÂç∑ÔºÅ`, timeout: 10000});
            } else {
                return url.href;
            }
        }
        return '';
    }


    // manhuadb ÂàùÂßãÂåñÔºàÂ∞ÜÊú¨ËØùÂÖ∂‰ΩôÂõæÁâáÊèíÂÖ•ÁΩëÈ°µ‰∏≠Ôºâ
    function manhuadb_init() {
        let _img = '',
            data = document.querySelector('.vg-r-data'), imgDate;
        if (!data) return
        document.querySelectorAll(curSite.pager.pageElement.replace('css;', '')).forEach(function (one) {
            if (one.tagName === 'SCRIPT' && one.textContent.indexOf('var img_data =') > -1) {
                let json = JSON.parse(window.atob(one.textContent.split("'")[1]));
                if (json) {
                    let _img = '';
                    for (let i = 0; i < json.length; i++) { // ÈÅçÂéÜÂõæÁâáÊñá‰ª∂ÂêçÊï∞ÁªÑÔºåÁªÑÂêà‰∏∫ img Ê†áÁ≠æ
                        let src = data.dataset.host + data.dataset.img_pre + json[i].img;
                        _img += `<img class="img-fluid show-pic" src="${src}">`
                    }
                    document.querySelector(curSite.pager.insertPosition[0].replace('css;', '')).insertAdjacentHTML(addTo(curSite.pager.insertPosition[1]), _img); // Â∞Ü img Ê†áÁ≠æÊèíÂÖ•Âà∞ÁΩëÈ°µ‰∏≠
                }
            }
        })
    }
    // manhuadb Ëé∑Âèñ‰∏ã‰∏ÄÈ°µÂú∞ÂùÄ
    function manhuadb_functionNext() {
        let nextArr = document.querySelectorAll('a.fixed-a-es'), next;
        if (nextArr.length == 0) return
        curSite.pageUrl = '';
        for (let i = 0; i < nextArr.length; i++) {
            if (nextArr[i].className.indexOf('active') > -1) {
                if (nextArr[i+1]) curSite.pageUrl = nextArr[i+1].href;
                break;
            }
        }
        if (curSite.pageUrl) getPageElems(curSite.pageUrl);
    }
    // manhuadb ÊèíÂÖ•Êï∞ÊçÆ
    function manhuadb_insertElement(pageElems, type) {
        if (!pageElems) return
        let oriE = document.querySelectorAll(curSite.pager.pageElement.replace('css;', '')),
            repE = getAllElements(curSite.pager.pageElement, pageElems, pageElems);
        if (oriE.length === repE.length) {
            for (let i = 0; i < oriE.length; i++) {
                oriE[i].outerHTML = repE[i].outerHTML;
            }
            manhuadb_init(); // Â∞ÜÂàöÂàöÊõøÊç¢ÁöÑÂõæÁâáÊèíÂÖ•ÁΩëÈ°µ‰∏≠
        }
    }


    // hicomic ÂàùÂßãÂåñÔºàÂ∞ÜÊú¨ËØùÂÖ∂‰ΩôÂõæÁâáÊèíÂÖ•ÁΩëÈ°µ‰∏≠Ôºâ
    function hicomic_init() {
        let _img = '';
        document.querySelectorAll('.chapter > section:not(:first-child) > section[val]').forEach(function (one) {
            let src = one.getAttribute('val');
            if (src.indexOf('!p_c_c_') === -1) src += '!p_c_c_h'
            _img += `<img src="${src}">`
        })
        document.querySelector(curSite.pager.insertPosition[0].replace('css;', '')).insertAdjacentHTML(addTo(curSite.pager.insertPosition[1]), _img); // Â∞Ü img Ê†áÁ≠æÊèíÂÖ•Âà∞ÁΩëÈ°µ‰∏≠
        window.document.title = window.document.title.replace(/(\(Á¨¨.+\))? - HiComic/, `(${document.querySelector('.chapter_name').textContent}) - HiComic`); // ‰øÆÊîπÁΩëÈ°µÊ†áÈ¢òÔºàÂä†‰∏ä Á¨¨ X ËØùÔºâ
    }
    // hicomic Ëé∑Âèñ‰∏ã‰∏ÄÈ°µÂú∞ÂùÄ
    function hicomic_functionNext() {
        let nextId;
        nextId = document.querySelector('.next_chapter:not(.end)')
        if (nextId && nextId.id && nextId.id != 'None') {
            curSite.pageUrl = location.href;
            getPageElems(`https://www.hicomic.net/api/web/chapter/${nextId.id}/contents`, 'json');
        }
    }
    // hicomic ÊèíÂÖ•Êï∞ÊçÆ
    function hicomic_insertElement(pageElems, type) {
        if (!pageElems || pageElems.code != 200) return
        if (pageElems.results.chapter.next) { // ÂÜôÂÖ•‰∏ã‰∏ÄÈ°µÁöÑ UUID
            document.querySelector('.next_chapter').id = pageElems.results.chapter.next;
        } else {
            document.querySelector('.next_chapter').id = 'None';
            document.querySelector('.next_chapter').classList.add('end');
        }
        document.querySelector('.chapter_name').textContent = pageElems.results.chapter.name; // ‰øÆÊîπÊº´ÁîªÊ†áÈ¢ò
        let title = window.document.title.replace(/(\(Á¨¨.+\))? - HiComic/, `(${pageElems.results.chapter.name}) - HiComic`)
        window.history.pushState(`{title: ${document.title}, url: ${location.href}}`, title, curSite.pageUrl); // Ê∑ªÂä†ÂéÜÂè≤ËÆ∞ÂΩï
        window.document.title = title; // ‰øÆÊîπÂΩìÂâçÁΩëÈ°µÊ†áÈ¢ò‰∏∫‰∏ã‰∏ÄËØùÁöÑÊ†áÈ¢ò
        let _img = '';
        for (let i = 0; i < pageElems.results.chapter.contents.length; i++) { // ÈÅçÂéÜÂõæÁâáÊñá‰ª∂ÂêçÊï∞ÁªÑÔºåÁªÑÂêà‰∏∫ img Ê†áÁ≠æ
            let src = pageElems.results.chapter.contents[i].url;
            if (src.indexOf('!p_c_c_') === -1) src += '!p_c_c_h';
            _img += `<img src="${src}">`
        }
        document.querySelector(curSite.pager.insertPosition[0].replace('css;', '')).insertAdjacentHTML(addTo(curSite.pager.insertPosition[1]), _img); // Â∞Ü img Ê†áÁ≠æÊèíÂÖ•Âà∞ÁΩëÈ°µ‰∏≠
    }


    // gufengmh8 Ëé∑Âèñ‰∏ã‰∏ÄÈ°µÂú∞ÂùÄ
    function gufengmh8_functionNext() {
        let pageElems = document.querySelector(curSite.pager.pageElement.replace('css;', '')); // ÂØªÊâæÊï∞ÊçÆÊâÄÂú®ÂÖÉÁ¥†
        if (pageElems) {
            let comicUrl, nextId;
            pageElems.textContent.split(';').forEach(function (one){ // ÂàÜÂè∑ ; ÂàÜÂâ≤‰∏∫Êï∞ÁªÑÂπ∂ÈÅçÂéÜ
                //console.log(one)
                if (one.indexOf('comicUrl') > -1) { // ‰∏ã‰∏ÄÈ°µ URL ÂâçÂçäÈÉ®ÂàÜ
                    comicUrl = one.split('"')[1];
                } else if (one.indexOf('nextChapterData') > -1) { // ‰∏ã‰∏ÄÈ°µ URL ÁöÑÂêéÂçäÈÉ®ÂàÜ ID
                    nextId = one.split('"id":')[1].split(',')[0];
                }
            })
            if (comicUrl && nextId && nextId != 'null') { // ÁªÑÂêàÂà∞‰∏ÄËµ∑Â∞±ÊòØ‰∏ã‰∏ÄÈ°µ URL
                curSite.pageUrl = comicUrl + nextId + '.html'
                getPageElems(curSite.pageUrl); // ËÆøÈóÆ‰∏ã‰∏ÄÈ°µ URL Ëé∑Âèñ
            }
        }
    }
    // gufengmh8 ÊèíÂÖ•Êï∞ÊçÆ
    function gufengmh8_insertElement(pageElems, type) {
        if (pageElems) {
            let url = curSite.pageUrl;
            pageElems = getAllElements(curSite.pager.pageElement, pageElems, pageElems)[0];
            let chapterImages, chapterPath;
            document.querySelector(curSite.pager.pageElement.replace('css;', '')).innerText = pageElems.textContent; // Â∞ÜÂΩìÂâçÁΩëÈ°µÂÜÖÁöÑÊï∞ÊçÆÊâÄÂú®ÂÖÉÁ¥†ÂÜÖÂÆπÊîπ‰∏∫ÂàöÂàöËé∑ÂèñÁöÑ‰∏ã‰∏ÄÈ°µÊï∞ÊçÆÂÜÖÂÆπÔºå‰ª•‰æøÂæ™ÁéØËé∑Âèñ‰∏ã‰∏ÄÈ°µ URL
            pageElems.textContent.split(';').forEach(function (one){ // ÂàÜÂè∑ ; ÂàÜÂâ≤‰∏∫Êï∞ÁªÑÂπ∂ÈÅçÂéÜ
                //console.log(one)
                if (one.indexOf('chapterImages') > -1) { // ÂõæÁâáÊñá‰ª∂ÂêçÊï∞ÁªÑ
                    chapterImages = one.replace(/^.+\[/, '').replace(']', '').replaceAll('"', '').split(',')
                } else if (one.indexOf('chapterPath') > -1) { // ÂõæÁâáÊñá‰ª∂Ë∑ØÂæÑ
                    chapterPath = one.split('"')[1];
                } else if (one.indexOf('pageTitle') > -1) { // ÁΩëÈ°µÊ†áÈ¢ò
                    let title = one.split('"')[1];
                    window.history.pushState(`{title: ${document.title}, url: ${location.href}}`, title, url); // Ê∑ªÂä†ÂéÜÂè≤ËÆ∞ÂΩï
                    window.document.title = title; // ‰øÆÊîπÂΩìÂâçÁΩëÈ°µÊ†áÈ¢ò‰∏∫‰∏ã‰∏ÄÈ°µÁöÑÊ†áÈ¢ò
                }
            })
            if (chapterImages && chapterPath) {
                let _img = '';
                chapterImages.forEach(function (one2){ // ÈÅçÂéÜÂõæÁâáÊñá‰ª∂ÂêçÊï∞ÁªÑÔºåÁªÑÂêà‰∏∫ img Ê†áÁ≠æ
                    _img += '<img src="https://res.xiaoqinre.com/' + chapterPath + one2 + '" data-index="0" style="display: inline-block;">'
                })
                document.querySelector(curSite.pager.insertPosition[0].replace('css;', '')).insertAdjacentHTML(addTo(curSite.pager.insertPosition[1]), _img); // Â∞Ü img Ê†áÁ≠æÊèíÂÖ•Âà∞ÁΩëÈ°µ‰∏≠
            }
        }
    }


    // szcdmj ÁöÑÊèíÂÖ•ÂâçÂáΩÊï∞ÔºàÂä†ËΩΩÂõæÁâáÔºâ
    function szcdmj_functionBefore(pageElems) {
        pageElems.forEach(function (one) {
            if (one.tagName === 'TITLE') {
                let title = one.textContent;
                window.history.pushState(`{title: ${document.title}, url: ${location.href}}`, title, curSite.pageUrl); // Ê∑ªÂä†ÂéÜÂè≤ËÆ∞ÂΩï
                window.document.title = title; // ‰øÆÊîπÂΩìÂâçÁΩëÈ°µÊ†áÈ¢ò‰∏∫‰∏ã‰∏ÄÈ°µÁöÑÊ†áÈ¢ò
                one.style.display = 'none';
            } else {
                let now = one.querySelector('img[data-original]')
                if (now) {
                    now.src = now.dataset.original;
                    now.style.display = 'inline';
                }
            }
        });
        return pageElems
    }


    // Ëá™Âä®Êó†ÁºùÁøªÈ°µ
    function pageLoading() {
        if (curSite.SiteTypeID > 0) {
            windowScroll(function (direction, e) {
                if (direction === 'down' && pausePage === true) { // ‰∏ãÊªë/Ê≤°ÊúâÊöÇÂÅúÁøªÈ°µÊó∂ÔºåÊâçÂáÜÂ§áÁøªÈ°µ
                    let scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop,
                        scrollHeight = window.innerHeight || document.documentElement.clientHeight,
                        scrollDelta = curSite.pager.scrollDelta;
                    if (curSite.pager.type === 3) { // <<<<< ÁøªÈ°µÁ±ªÂûã 3Ôºà‰æùÈù†ÂÖÉÁ¥†Ë∑ùÁ¶ªÂèØËßÜÂå∫ÂüüÂ∫ïÈÉ®ÁöÑË∑ùÁ¶ªÊù•Ëß¶ÂèëÁøªÈ°µÔºâ>>>>>
                        let scrollElement = document.querySelector(curSite.pager.scrollElement);
                        //console.log(scrollElement.offsetTop - (scrollTop + scrollHeight), scrollDelta, curSite.SiteTypeID)
                        if (scrollElement.offsetTop - (scrollTop + scrollHeight) <= scrollDelta) {
                            if (curSite.SiteTypeID === SiteType.GAMERSKY_GL) curSite.pager.scrollDelta -= 800 // Ê∏∏Ê∞ëÊòüÁ©∫ gl ÁöÑÊØîËæÉÂ•áËë©ÔºåÈúÄË¶ÅÁâπÊÆäÂ§ÑÁêÜ‰∏ã
                            ShowPager.loadMorePage();
                        }
                    } else {
                        if (document.documentElement.scrollHeight <= scrollHeight + scrollTop + scrollDelta) {
                            if (curSite.pager.type === 2) { // <<<<< ÁøªÈ°µÁ±ªÂûã 2ÔºàÁΩëÁ´ôËá™Â∏¶‰∫ÜËá™Âä®Êó†ÁºùÁøªÈ°µÂäüËÉΩÔºåÂè™ÈúÄË¶ÅÁÇπÂáª‰∏ã‰∏ÄÈ°µÊåâÈíÆÂç≥ÂèØÔºâ>>>>>
                                if (curSite.SiteTypeID > 0) { // Â¶ÇÊûúÊåáÂÆö‰∫ÜÈó¥ÈöîÊó∂Èó¥ÔºåÈÇ£‰πàÂ∞±‰æùÈù†Ëøô‰∏™Âà§Êñ≠Êó∂Èó¥Âà∞‰∫ÜÊ≤°Êúâ~
                                    let autopbn = document.querySelector(curSite.pager.nextLink);
                                    if (autopbn) { // ÂØªÊâæ‰∏ã‰∏ÄÈ°µÈìæÊé•
                                        // ÈÅøÂÖçÈáçÂ§çÁÇπÂáªÁøªÈ°µÊåâÈíÆ
                                        if (curSite.pager.nextText) { //          ÊåâÈíÆÊñáÊú¨ÔºåÂΩìÊåâÈíÆÊñáÊú¨ = ËØ•ÊñáÊú¨Êó∂ÔºåÊâç‰ºöÁÇπÂáªÊåâÈíÆÂä†ËΩΩ‰∏ã‰∏ÄÈ°µ
                                            if (autopbn.innerText === curSite.pager.nextText) autopbn.click();
                                        } else if (curSite.pager.nextTextOf) { // ÊåâÈíÆÊñáÊú¨ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂΩìÊåâÈíÆÊñáÊú¨ÂåÖÂê´ËØ•ÊñáÊú¨Êó∂ÔºåÊâç‰ºöÁÇπÂáªÊåâÈíÆÂä†ËΩΩ‰∏ã‰∏ÄÈ°µ
                                            if (autopbn.innerText.indexOf(curSite.pager.nextTextOf) > -1) autopbn.click();
                                        } else if (curSite.pager.nextHTML) { //   ÊåâÈíÆÂÜÖÂÖÉÁ¥†ÔºåÂΩìÊåâÈíÆÂÜÖÂÖÉÁ¥† = ËØ•ÂÖÉÁ¥†ÂÜÖÂÆπÊó∂ÔºåÊâç‰ºöÁÇπÂáªÊåâÈíÆÂä†ËΩΩ‰∏ã‰∏ÄÈ°µ
                                            if (autopbn.innerHTML === curSite.pager.nextHTML) autopbn.click();
                                        } else { // Â¶ÇÊûúÊ≤°ÊúâÊåáÂÆöÊåâÈíÆÊñáÂ≠óÂ∞±Áõ¥Êé•ÁÇπÂáª
                                            autopbn.click();
                                            // ÂØπ‰∫éÊ≤°ÊúâÊåâÈíÆÊñáÂ≠óÂèòÂåñÁöÑÊåâÈíÆÔºåÂèØ‰ª•ÊâãÂä®ÊåáÂÆöÈó¥ÈöîÊó∂Èó¥
                                            if (curSite.pager.intervals) {
                                                let _SiteTypeID = curSite.SiteTypeID; curSite.SiteTypeID = 0;
                                                setTimeout(function(){curSite.SiteTypeID = _SiteTypeID;}, curSite.pager.intervals)
                                            }
                                        }
                                    }
                                }
                            } else if (curSite.pager.type === 1) { // <<<<< ÁøªÈ°µÁ±ªÂûã 1ÔºàÁî±ËÑöÊú¨ÂÆûÁé∞Ëá™Âä®Êó†ÁºùÁøªÈ°µÔºâ>>>>>
                                // ‰∏∫ÁôæÂ∫¶Ë¥¥ÂêßÁöÑÂèëÂ∏ñËÄÉËôë...
                                if (!(document.documentElement.scrollHeight <= scrollHeight + scrollTop + 200 && curSite.SiteTypeID === SiteType.BAIDU_TIEBA)) {
                                    ShowPager.loadMorePage();
                                }
                            } else if (curSite.pager.type === 4) { // <<<<< ÁøªÈ°µÁ±ªÂûã 4ÔºàÈÉ®ÂàÜÁÆÄÂçïÁöÑÂä®ÊÄÅÂä†ËΩΩÁ±ªÁΩëÁ´ôÔºâ>>>>>
                                if (curSite.SiteTypeID > 0) {
                                    curSite.pager.nextLink();
                                    if (curSite.pager.intervals) {
                                        let _SiteTypeID = curSite.SiteTypeID;
                                        curSite.SiteTypeID = 0;
                                        setTimeout(function(){curSite.SiteTypeID = _SiteTypeID;}, curSite.pager.intervals)
                                    }
                                }
                            }
                        }
                    }
                }
            });
        }
    }


    // ÂêØÁî®/Á¶ÅÁî® (ÂΩìÂâçÁΩëÁ´ô)
    function menu_disable(type) {
        switch(type) {
            case 'check':
                if(check()) {return true;} else {return false;}; break;
            case 'add':
                add(); break;
            case 'del':
                del(); break;
        }

        function check() { // Â≠òÂú®ËøîÂõûÁúüÔºå‰∏çÂ≠òÂú®ËøîÂõûÂÅá
            let list = GM_getValue('menu_disable'); // ËØªÂèñÁΩëÁ´ôÂàóË°®
            if (list.indexOf(location.host) === -1) return false // ‰∏çÂ≠òÂú®ËøîÂõûÂÅá
            return true
        }

        function add() {
            if (check()) return
            let list = GM_getValue('menu_disable'); // ËØªÂèñÁΩëÁ´ôÂàóË°®
            list.push(location.host); // ËøΩÂä†ÁΩëÁ´ôÂüüÂêç
            GM_setValue('menu_disable', list); // ÂÜôÂÖ•ÈÖçÁΩÆ
            location.reload(); // Âà∑Êñ∞ÁΩëÈ°µ
        }

        function del() {
            if (!check()) return
            let list = GM_getValue('menu_disable'), // ËØªÂèñÁΩëÁ´ôÂàóË°®
            index = list.indexOf(location.host);
            list.splice(index, 1); // Âà†Èô§ÁΩëÁ´ôÂüüÂêç
            GM_setValue('menu_disable', list); // ÂÜôÂÖ•ÈÖçÁΩÆ
            location.reload(); // Âà∑Êñ∞ÁΩëÈ°µ
        }
    }


    // Â∑¶ÈîÆÂèåÂáªÁΩëÈ°µÁ©∫ÁôΩÂ§ÑÊöÇÂÅúÁøªÈ°µ
    function pausePageEvent() {
        if (!GM_getValue('menu_pause_page')) return
        if (curSite.SiteTypeID === 0) return
        document.body.addEventListener('dblclick', function (e) {
            if (pausePage) {
                pausePage = false;
                GM_notification({text: `‚ùå Â∑≤ÊöÇÂÅúÊú¨È°µ [Ëá™Âä®Êó†ÁºùÁøªÈ°µ]\n    ÔºàÂÜçÊ¨°ÂèåÂáªÂèØÊÅ¢Â§çÔºâ`, timeout: 2500});
            } else {
                pausePage = true;
                GM_notification({text: `‚úÖ Â∑≤ÊÅ¢Â§çÊú¨È°µ [Ëá™Âä®Êó†ÁºùÁøªÈ°µ]\n    ÔºàÂÜçÊ¨°ÂèåÂáªÂèØÊöÇÂÅúÔºâ`, timeout: 2500});
            }
        });
    }


    // ËèúÂçïÂºÄÂÖ≥
    function menu_switch(menu_status, Name, Tips) {
        if (menu_status === true){
            GM_setValue(`${Name}`, false);
        } else {
            GM_setValue(`${Name}`, true);
        }
        location.reload();
    };


    // ÁîüÊàê ID
    function generateID() {
        let num = 0
        for (let val in DBSite) {
            DBSite[val].SiteTypeID = num = num + 1;
        }
    }


    // Âà§Êñ≠ÊòØÊîØÊåÅ
    function doesItSupport() {
        setDBSite(); // ÈÖçÁΩÆ DBSite ÂèòÈáèÂØπË±°

        // ÈÅçÂéÜÂà§Êñ≠ÊòØÂê¶ÊòØÊüê‰∏™Â∑≤ÊîØÊåÅÁöÑÁΩëÁ´ôÔºåÈ°∫‰æøÁõ¥Êé•ËµãÂÄº
        let support = false;
        for (let now in DBSite) { // ÈÅçÂéÜÂØπË±°
            if (!DBSite[now].host) continue; // Â¶ÇÊûú‰∏çÂ≠òÂú®ÂàôÁªßÁª≠‰∏ã‰∏Ä‰∏™Âæ™ÁéØ
            if (Array.isArray(DBSite[now].host)) { // Â¶ÇÊûúÊòØÊï∞ÁªÑ
                for (let i of DBSite[now].host) { // ÈÅçÂéÜÊï∞ÁªÑ
                    if (i === location.host) {
                        if (DBSite[now].functionStart) {
                            DBSite[now].functionStart();
                        } else {
                            curSite = DBSite[now];
                        }
                        support = true; break; // Â¶ÇÊûúÊâæÂà∞‰∫ÜÂ∞±ÈÄÄÂá∫Âæ™ÁéØ
                    }
                }
            } else if (DBSite[now].host === location.host) {
                if (DBSite[now].functionStart) {
                    DBSite[now].functionStart();
                } else {
                    curSite = DBSite[now];
                }
                support = true; break; // Â¶ÇÊûúÊâæÂà∞‰∫ÜÂ∞±ÈÄÄÂá∫Âæ™ÁéØ
            }
        }

        if (!support) { // ÈÉ®ÂàÜÂüüÂêçÈ¢ùÂ§ñÂà§Êñ≠‰∏Ä‰∏ã
            if (location.host.indexOf(DBSite.btbtt.host) > -1) { //   < BT ‰πãÂÆ∂ >
                curSite = DBSite.btbtt;
                support = true;
            }
        }

        if (support) {
            console.info('[Ëá™Âä®Êó†ÁºùÁøªÈ°µ] - ÂÖ∂‰ªñÁΩëÁ´ôÔºàÁã¨Á´ãËßÑÂàôÔºâ'); return 1;
        } else if (document.querySelector('meta[name="author"][content*="Discuz!"], meta[name="generator"][content*="Discuz!"]') || document.getElementById('ft') && document.getElementById('ft').textContent.indexOf('Discuz!') > -1) {
            console.info('[Ëá™Âä®Êó†ÁºùÁøªÈ°µ] - Discuz! ËÆ∫Âùõ'); return 2;
        } else if (document.getElementById('flarum-loading')) {
            console.info('[Ëá™Âä®Êó†ÁºùÁøªÈ°µ] - Flarum ËÆ∫Âùõ'); return 3;
        } else if (document.querySelector('link[href*="themes/dux" i], script[src*="themes/dux" i]')) {
            console.info('[Ëá™Âä®Êó†ÁºùÁøªÈ°µ] - ‰ΩøÁî® WordPress DUX ‰∏ªÈ¢òÁöÑÁΩëÁ´ô'); return 4;
        } else if (location.host === 'www.flyert.com') {
            console.info('[Ëá™Âä®Êó†ÁºùÁøªÈ°µ] - ÈÉ®ÂàÜÂÖßÂµåÁöÑ Discuz! ËÆ∫Âùõ'); return 2;
        }
        return 0;
    }


    // Á±ªÂûã 4 ‰∏ìÁî®
    function getPageElems(url, type = 'text', method = 'GET', data = '', type2) {
        //console.log(url, data)
        GM_xmlhttpRequest({
            url: url,
            method: method,
            data: data,
            responseType: type,
            headers: {
                'Content-Type': (method === 'POST') ? 'application/x-www-form-urlencoded':''
            },
            timeout: 5000,
            onload: function (response) {
                try {
                    //console.log('ÊúÄÁªà URLÔºö' + response.finalUrl, 'ËøîÂõûÂÜÖÂÆπÔºö' + response.responseText)
                    switch (type) {
                        case 'json':
                            curSite.pager.insertElement(response.response, type2);
                            break;
                        default:
                            curSite.pager.insertElement(ShowPager.createDocumentByString(response.responseText), type2)
                    }
                } catch (e) {
                    console.log(e);
                }
            }
        });
    }


    // ÊèíÂÖ•‰ΩçÁΩÆ
    function addTo(num) {
        switch (num) {
            case 1:
                return 'beforebegin'; break;
            case 2:
                return 'afterbegin'; break;
            case 3:
                return 'beforeend'; break;
            case 4:
                return 'afterend'; break;
        }
    }


    // ÊªöÂä®Êù°‰∫ã‰ª∂
    function windowScroll(fn1) {
        var beforeScrollTop = document.documentElement.scrollTop || document.body.scrollTop,
            fn = fn1 || function () {};
        setTimeout(function () { // Âª∂Êó∂ 1 ÁßíÊâßË°åÔºåÈÅøÂÖçÂàöËΩΩÂÖ•Âà∞È°µÈù¢Â∞±Ëß¶ÂèëÁøªÈ°µ‰∫ã‰ª∂
            window.addEventListener('scroll', function (e) {
                var afterScrollTop = document.documentElement.scrollTop || document.body.scrollTop,
                    delta = afterScrollTop - beforeScrollTop;
                if (delta == 0) return false;
                fn(delta > 0 ? 'down' : 'up', e);
                beforeScrollTop = afterScrollTop;
            }, false);
        }, 1000)
    }


    // ‰øÆÊîπËá™ https://greasyfork.org/scripts/14178 , https://github.com/machsix/Super-preloader
    var ShowPager = {
        getFullHref: function (e) {
            if (e != null && e.nodeType === 1 && e.href && e.href.slice(0,4) === 'http') return e.href;
            return '';
        },
        createDocumentByString: function (e) {
            if (e) {
                if ('HTML' !== document.documentElement.nodeName) return (new DOMParser).parseFromString(e, 'application/xhtml+xml');
                var t;
                try { t = (new DOMParser).parseFromString(e, 'text/html');} catch (e) {}
                if (t) return t;
                if (document.implementation.createHTMLDocument) {
                    t = document.implementation.createHTMLDocument('ADocument');
                } else {
                    try {((t = document.cloneNode(!1)).appendChild(t.importNode(document.documentElement, !1)), t.documentElement.appendChild(t.createElement('head')), t.documentElement.appendChild(t.createElement('body')));} catch (e) {}
                }
                if (t) {
                    var r = document.createRange(),
                        n = r.createContextualFragment(e);
                    r.selectNodeContents(document.body);
                    t.body.appendChild(n);
                    for (var a, o = { TITLE: !0, META: !0, LINK: !0, STYLE: !0, BASE: !0}, i = t.body, s = i.childNodes, c = s.length - 1; c >= 0; c--) o[(a = s[c]).nodeName] && i.removeChild(a);
                    return t;
                }
            } else console.error('Ê≤°ÊúâÊâæÂà∞Ë¶ÅËΩ¨Êàê DOM ÁöÑÂ≠óÁ¨¶‰∏≤');
        },
        loadMorePage: function () {
            if (curSite.pager) {
                var url;
                if (typeof curSite.pager.nextLink == 'function') {
                    url = curSite.pager.nextLink();
                } else {
                    if (curSite.pager.nextLink.slice(0,4) === 'css;') {
                        url = this.getFullHref(getElementByCSS(curSite.pager.nextLink.slice(4)));
                    } else {
                        url = this.getFullHref(getElementByXpath(curSite.pager.nextLink));
                    }
                }
                //console.log(url, curSite.pageUrl);
                if (url === '') return;
                if (curSite.pageUrl === url) return;// ÈÅøÂÖçÈáçÂ§çÂä†ËΩΩÁõ∏ÂêåÁöÑÈ°µÈù¢
                curSite.pageUrl = url;
                if (curSite.SiteTypeID === SiteType.BAIDU_TIEBA) {
                    url = url + '&pagelets=frs-list%2Fpagelet%2Fthread&pagelets_stamp=' + new Date().getTime();
                }
                let mimeType = '';
                if (curSite.pager.mimeType) mimeType = curSite.pager.mimeType;
                // ËØªÂèñ‰∏ã‰∏ÄÈ°µÁöÑÊï∞ÊçÆ
                GM_xmlhttpRequest({
                    url: url,
                    method: 'GET',
                    overrideMimeType: mimeType,
                    headers: {
                        "Referer": location.href
                    },
                    timeout: 5000,
                    onload: function (response) {
                        try {
                            //console.log('ÊúÄÁªà URLÔºö' + response.finalUrl, 'ËøîÂõûÂÜÖÂÆπÔºö' + response.responseText)
                            var newBody = ShowPager.createDocumentByString(response.responseText);
                            let pageElems = getAllElements(curSite.pager.pageElement, newBody, newBody),
                                toElement = getAllElements(curSite.pager.insertPosition[0])[0];
                            //console.log(curSite.pager.pageElement, pageElems)

                            if (pageElems.length >= 0) {
                                // Â¶ÇÊûúÊúâÊèíÂÖ•ÂâçÂáΩÊï∞Â∞±ÊâßË°åÂáΩÊï∞
                                if (curSite.function && curSite.function.before) {
                                    if (curSite.function.parameter) { // Â¶ÇÊûúÊåáÂÆö‰∫ÜÂèÇÊï∞
                                        pageElems = curSite.function.before(curSite.function.parameter);
                                    } else {
                                        pageElems = curSite.function.before(pageElems);
                                    }
                                }

                                // ÊèíÂÖ•‰ΩçÁΩÆ
                                let addTo1 = addTo(curSite.pager.insertPosition[1]);

                                // ÊèíÂÖ•Êñ∞È°µÈù¢ÂÖÉÁ¥†
                                if (curSite.SiteTypeID === SiteType.STEAMCOMMUNITY || curSite.SiteTypeID === SiteType.NGA_THREAD || curSite.SiteTypeID === SiteType.NGA_READ) {
                                    pageElems.forEach(function (one) {
                                        if (one.tagName === 'SCRIPT') { // ÂØπ‰∫é <script> ÈúÄË¶ÅÁî®Âè¶‰∏ÄÁßçÊñπÂºèÊèíÂÖ•ÁΩëÈ°µÔºå‰ª•‰æøÊ≠£Â∏∏ËøêË°å
                                            toElement.appendChild(document.createElement('script')).innerHTML = one.textContent;
                                        } else {
                                            toElement.insertAdjacentElement(addTo1, one); // ÁªßÁª≠ÊèíÂÖ•ÁΩëÈ°µ‰∏ª‰ΩìÂÖÉÁ¥†
                                        }
                                    });
                                } else if (curSite.SiteTypeID != SiteType.BAIDU_TIEBA) {
                                    pageElems.forEach(function (one) {toElement.insertAdjacentElement(addTo1, one);});
                                }

                                // ÂØπ‰∫é <script> ÈúÄË¶ÅÁî®Âè¶‰∏ÄÁßçÊñπÂºèÊèíÂÖ•ÁΩëÈ°µÔºå‰ª•‰æøÊ≠£Â∏∏ËøêË°å
                                if (curSite.SiteTypeID === SiteType.GOOGLE) {
                                    const scriptElems = getAllElements('//script', newBody, newBody);
                                    let scriptText = '';
                                    scriptElems.forEach(function (one) {scriptText += one.innerHTML;});
                                    toElement.appendChild(document.createElement('script')).innerHTML = scriptText;
                                }

                                // ÂØπ‰∫éÁôæÂ∫¶Ë¥¥ÂêßËøôÁßçÂä®ÊÄÅÂä†ËΩΩÂÜÖÂÆπÁöÑÁΩëÁ´ôÈúÄË¶ÅÂçïÁã¨Â§ÑÁêÜ
                                if (curSite.SiteTypeID === SiteType.BAIDU_TIEBA) {
                                    const scriptElems = getAllElements('//script', newBody, newBody);
                                    let scriptText = '';
                                    for (let i = 0; i < scriptElems.length; i++) {
                                        if (scriptElems[i].textContent.indexOf('Bigpipe.register("frs-list/pagelet/thread_list"') > -1) {
                                            scriptText = scriptElems[i].textContent.replace('Bigpipe.register("frs-list/pagelet/thread_list", ','');
                                            break
                                        }
                                    }
                                    if (scriptText) {
                                        scriptText = scriptText.slice(0, scriptText.indexOf(').')) // Ëé∑Âèñ‰∏ª‰ΩìÂÜÖÂÆπ
                                        let scriptJSON = JSON.parse(scriptText).content; // Â≠óÁ¨¶‰∏≤ËΩ¨ JSON
                                        var temp_baidu_tieba = document.createElement('div'); temp_baidu_tieba.innerHTML = scriptJSON; // Â≠óÁ¨¶‰∏≤ËΩ¨ Element ÂÖÉÁ¥†
                                        pageElems = curSite.function.before(getAllElements(curSite.pager.pageElement, temp_baidu_tieba, temp_baidu_tieba)); // ÊèíÂÖ•ÂâçÊâßË°åÂáΩÊï∞
                                        pageElems.forEach(function (one) {toElement.insertAdjacentElement(addTo1, one);}); // ÊèíÂÖ•ÂÖÉÁ¥†
                                    }
                                    //toElement.appendChild(document.createElement('script')).innerHTML = scriptText;
                                }

                                // ÊõøÊç¢ÂæÖÊõøÊç¢ÂÖÉÁ¥†
                                try {
                                    let oriE = getAllElements(curSite.pager.replaceE), repE;
                                    if (curSite.SiteTypeID === SiteType.BAIDU_TIEBA) {
                                        repE = getAllElements(curSite.pager.replaceE, temp_baidu_tieba, temp_baidu_tieba);
                                    } else {
                                        repE = getAllElements(curSite.pager.replaceE, newBody, newBody);
                                    }
                                    if (oriE.length === repE.length) {
                                        for (let i = 0; i < oriE.length; i++) {
                                            oriE[i].outerHTML = repE[i].outerHTML;
                                        }
                                    }
                                } catch (e) {
                                    console.log(e);
                                }
                                // Â¶ÇÊûúÊúâÊèíÂÖ•ÂêéÂáΩÊï∞Â∞±ÊâßË°åÂáΩÊï∞
                                if (curSite.function && curSite.function.after) {
                                    if (curSite.function.parameter) { // Â¶ÇÊûúÊåáÂÆö‰∫ÜÂèÇÊï∞
                                        curSite.function.after(curSite.function.parameter);
                                    } else {
                                        curSite.function.after();
                                    }
                                }
                            }
                        } catch (e) {
                            console.log(e);
                        }
                    }
                });
            }
        },
    };

    function getElementByCSS(css, contextNode = document) {
        return contextNode.querySelector(css);
    }
    function getAllElementsByCSS(css, contextNode = document) {
        return [].slice.call(contextNode.querySelectorAll(css));
    }
    function getElementByXpath(xpath, contextNode, doc = document) {
        contextNode = contextNode || doc;
        try {
            const result = doc.evaluate(xpath, contextNode, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null);
            // Â∫îËØ•ÊÄªÊòØËøîÂõû‰∏Ä‰∏™ÂÖÉÁ¥†ËäÇÁÇπ
            return result.singleNodeValue && result.singleNodeValue.nodeType === 1 && result.singleNodeValue;
        } catch (err) {
            throw new Error(`Invalid xpath: ${xpath}`);
        }
    }
    function getAllElementsByXpath(xpath, contextNode, doc = document) {
        contextNode = contextNode || doc;
        const result = [];
        try {
            const query = doc.evaluate(xpath, contextNode, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);
            for (let i = 0; i < query.snapshotLength; i++) {
                const node = query.snapshotItem(i);
                // Â¶ÇÊûúÊòØ Element ËäÇÁÇπ
                if (node.nodeType === 1) result.push(node);
            }
        } catch (err) {
            throw new Error(`Êó†Êïà Xpath: ${xpath}`);
        }
        return result;
    }
    function getAllElements(selector, contextNode = undefined, doc = document, win = window, _cplink = undefined) {
        if (!selector) return [];
        contextNode = contextNode || doc;
        if (typeof selector === 'string') {
            if (selector.search(/^css;/i) === 0) {
                return getAllElementsByCSS(selector.slice(4), contextNode);
            } else {
                return getAllElementsByXpath(selector, contextNode, doc);
            }
        } else {
            const query = selector(doc, win, _cplink);
            if (!Array.isArray(query)) {
                throw new Error('getAllElements ËøîÂõûÈîôËØØÁ±ªÂûã');
            } else {
                return query;
            }
        }
    }
})();